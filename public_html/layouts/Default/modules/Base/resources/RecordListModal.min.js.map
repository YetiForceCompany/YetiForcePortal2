{"version":3,"file":"RecordListModal.min.js","sources":["RecordListModal.js"],"sourcesContent":["/**\n * Record list modal class\n *\n * @copyright YetiForce Sp. z o.o.\n * @license YetiForce Public License 4.0 (licenses/LicenseEN.txt or yetiforce.com)\n * @author Mariusz Krzaczkowski <m.krzaczkowski@yetiforce.com>\n */\n'use strict';\n\nwindow.Base_RecordListModal_JS = class {\n\t/**\n\t * Register data table\n\t */\n\tregisterDataTable() {\n\t\tthis.dataTable = app.registerDataTables(this.table, {\n\t\t\torder: [],\n\t\t\tprocessing: true,\n\t\t\tserverSide: true,\n\t\t\tsearching: false,\n\t\t\torderCellsTop: true,\n\t\t\tdeferRender: true,\n\t\t\tajax: {\n\t\t\t\turl: 'index.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: (data) => {\n\t\t\t\t\t$.extend(data, this.listForm.serializeFormData());\n\t\t\t\t},\n\t\t\t\terror: function (jqXHR, ajaxOptions, thrownError) {\n\t\t\t\t\tapp.errorLog(jqXHR, thrownError);\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: thrownError,\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\tstack: window.stackPage\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.listForm.find('input,select').on('change', () => {\n\t\t\tthis.dataTable.ajax.reload();\n\t\t});\n\t}\n\t/**\n\t * Register records events\n\t */\n\tregisterListEvents() {\n\t\tthis.table.on('click', '.js-search-records', () => {\n\t\t\tthis.dataTable.ajax.reload();\n\t\t});\n\t\tthis.table.on('click', '.js-clear-search', () => {\n\t\t\tthis.table.find('.js-filter-field').each(function () {\n\t\t\t\tthis.value = '';\n\t\t\t});\n\t\t\tthis.dataTable.ajax.reload();\n\t\t});\n\t\tthis.table.on('click', '.js-select-record', (e) => {\n\t\t\tthis.selectCallBack(e);\n\t\t});\n\t\tthis.table.on('click', 'tbody tr', function (e) {\n\t\t\tlet element = jQuery(this);\n\t\t\tif (element.prop('tagName') !== 'A') {\n\t\t\t\telement.find('.js-select-record').off('click').trigger('click');\n\t\t\t}\n\t\t});\n\t}\n\taddSelectCallBack(fn) {\n\t\tthis.selectCallBack = fn;\n\t}\n\t/**\n\t * Register modal events.\n\t * @param {jQuery} modalContainer\n\t */\n\tregisterEvents(modalContainer) {\n\t\tthis.container = modalContainer;\n\t\tthis.table = modalContainer.find('.js-record-list-table');\n\t\tthis.listForm = modalContainer.find('.js-form-container');\n\t\tthis.registerDataTable();\n\t\tthis.registerListEvents();\n\t}\n};\n"],"names":["window","Base_RecordListModal_JS","dataTable","app","registerDataTables","table","order","processing","serverSide","searching","orderCellsTop","deferRender","ajax","url","type","data","$","extend","listForm","serializeFormData","error","jqXHR","ajaxOptions","thrownError","errorLog","showNotify","text","stack","stackPage","find","on","reload","each","value","e","selectCallBack","element","jQuery","prop","off","trigger","fn","modalContainer","container","registerDataTable","registerListEvents"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,0nBAEAA,MAAM,CAACC,uBAAP;AAEA;AACA,IACC,4BAAoB,gBACnB,KAAKC,SAAL,CAAiBC,GAAG,CAACC,kBAAJ,CAAuB,KAAKC,KAA5B,CAAmC,CACnDC,KAAK,CAAE,EAD4C,CAEnDC,UAAU,GAFyC,CAGnDC,UAAU,GAHyC,CAInDC,SAAS,GAJ0C,CAKnDC,aAAa,GALsC,CAMnDC,WAAW,GANwC,CAOnDC,IAAI,CAAE,CACLC,GAAG,CAAE,WADA,CAELC,IAAI,CAAE,MAFD,CAGLC,IAAI,CAAE,cAACA,KAAD,CAAU,CACfC,CAAC,CAACC,MAAF,CAASF,KAAT,CAAe,KAAI,CAACG,QAAL,CAAcC,iBAAd,EAAf,EACA,CALI,CAMLC,KAAK,CAAE,eAAUC,KAAV,CAAiBC,WAAjB,CAA8BC,WAA9B,CAA2C,CACjDpB,GAAG,CAACqB,QAAJ,CAAaH,KAAb,CAAoBE,WAApB,CADiD,CAEjDpB,GAAG,CAACsB,UAAJ,CAAe,CACdC,IAAI,CAAEH,WADQ,CAEdT,IAAI,CAAE,OAFQ,CAGda,KAAK,CAAE3B,MAAM,CAAC4B,SAHA,CAAf,EAKA,CAbI,CAP6C,CAAnC,CADE,CAwBnB,KAAKV,QAAL,CAAcW,IAAd,CAAmB,cAAnB,EAAmCC,EAAnC,CAAsC,QAAtC,CAAgD,UAAM,CACrD,KAAI,CAAC5B,SAAL,CAAeU,IAAf,CAAoBmB,MAApB,GACA,CAFD,EAGA,CACD;AACD;AACA,sCACC,6BAAqB,iBACpB,KAAK1B,KAAL,CAAWyB,EAAX,CAAc,OAAd,CAAuB,oBAAvB,CAA6C,UAAM,CAClD,MAAI,CAAC5B,SAAL,CAAeU,IAAf,CAAoBmB,MAApB,GACA,CAFD,CADoB,CAIpB,KAAK1B,KAAL,CAAWyB,EAAX,CAAc,OAAd,CAAuB,kBAAvB,CAA2C,UAAM,CAChD,MAAI,CAACzB,KAAL,CAAWwB,IAAX,CAAgB,kBAAhB,EAAoCG,IAApC,CAAyC,UAAY,CACpD,KAAKC,KAAL,CAAa,GACb,CAFD,CADgD,CAIhD,MAAI,CAAC/B,SAAL,CAAeU,IAAf,CAAoBmB,MAApB,GACA,CALD,CAJoB,CAUpB,KAAK1B,KAAL,CAAWyB,EAAX,CAAc,OAAd,CAAuB,mBAAvB,CAA4C,SAACI,CAAD,CAAO,CAClD,MAAI,CAACC,cAAL,CAAoBD,CAApB,EACA,CAFD,CAVoB,CAapB,KAAK7B,KAAL,CAAWyB,EAAX,CAAc,OAAd,CAAuB,UAAvB,CAAmC,UAAa,CAC/C,IAAIM,OAAO,CAAGC,MAAM,CAAC,IAAD,CAApB,CACgC,GAA5B,GAAAD,OAAO,CAACE,IAAR,CAAa,SAAb,CAF2C,EAG9CF,OAAO,CAACP,IAAR,CAAa,mBAAb,EAAkCU,GAAlC,CAAsC,OAAtC,EAA+CC,OAA/C,CAAuD,OAAvD,EAED,CALD,EAMA,CAtDF,iCAuDC,2BAAkBC,EAAlB,CAAsB,CACrB,KAAKN,cAAL,CAAsBM,GACtB,CACD;AACD;AACA;AACA,kCACC,wBAAeC,cAAf,CAA+B,CAC9B,KAAKC,SAAL,CAAiBD,cADa,CAE9B,KAAKrC,KAAL,CAAaqC,cAAc,CAACb,IAAf,CAAoB,uBAApB,CAFiB,CAG9B,KAAKX,QAAL,CAAgBwB,cAAc,CAACb,IAAf,CAAoB,oBAApB,CAHc,CAI9B,KAAKe,iBAAL,EAJ8B,CAK9B,KAAKC,kBAAL,GACA,CApEF;;"}