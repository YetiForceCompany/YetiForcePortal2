'use strict';

/**
 * Record list modal class
 *
 * @copyright YetiForce S.A.
 * @license YetiForce Public License 5.0 (licenses/LicenseEN.txt or yetiforce.com)
 * @author Mariusz Krzaczkowski <m.krzaczkowski@yetiforce.com>
 */'use strict';function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor);}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}window.Base_RecordListModal_JS=/*#__PURE__*/function(){function _class(){_classCallCheck(this,_class);}return _createClass(_class,[{key:"registerDataTable",value:/**
	 * Register data table
	 */function registerDataTable(){var _this=this;this.dataTable=app.registerDataTables(this.table,{order:[],processing:!0,serverSide:!0,searching:!1,orderCellsTop:!0,deferRender:!0,ajax:{url:"index.php",type:"POST",data:function data(_data){$.extend(_data,_this.listForm.serializeFormData());},error:function error(jqXHR,ajaxOptions,thrownError){app.errorLog(jqXHR,thrownError),app.showNotify({text:thrownError,type:"error",stack:window.stackPage});}}}),this.listForm.find("input,select").on("change",function(){_this.dataTable.ajax.reload();});}/**
	 * Register records events
	 */},{key:"registerListEvents",value:function registerListEvents(){var _this2=this;this.table.on("click",".js-search-records",function(){_this2.dataTable.ajax.reload();}),this.table.on("click",".js-clear-search",function(){_this2.table.find(".js-filter-field").each(function(){this.value="";}),_this2.dataTable.ajax.reload();}),this.table.on("click",".js-select-record",function(e){_this2.selectCallBack(e);}),this.table.on("click","tbody tr",function(){var element=jQuery(this);"A"!==element.prop("tagName")&&element.find(".js-select-record").off("click").trigger("click");});}},{key:"addSelectCallBack",value:function addSelectCallBack(fn){this.selectCallBack=fn;}/**
	 * Register modal events.
	 * @param {jQuery} modalContainer
	 */},{key:"registerEvents",value:function registerEvents(modalContainer){this.container=modalContainer,this.table=modalContainer.find(".js-record-list-table"),this.listForm=modalContainer.find(".js-form-container"),this.registerDataTable(),this.registerListEvents();}}]),_class}();
//# sourceMappingURL=RecordListModal.min.js.map
