{"version":3,"file":"DetailView.min.js","sources":["DetailView.js"],"sourcesContent":["/**\n * Base detail view class\n *\n * @copyright YetiForce S.A.\n * @license YetiForce Public License 5.0 (licenses/LicenseEN.txt or yetiforce.com)\n * @author Mariusz Krzaczkowski <m.krzaczkowski@yetiforce.com>\n */\n'use strict';\n\nwindow.Base_DetailView_Js = class {\n\t/**\n\t * Register record events\n\t */\n\tregisterRecordEvents() {\n\t\tthis.container.on('click', '.js-delete-record', (e) => {\n\t\t\tapp.showConfirmModal({\n\t\t\t\ttitle: app.translate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE'),\n\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tdata: {},\n\t\t\t\t\t\turl: $(e.currentTarget).data('url')\n\t\t\t\t\t}).done((data) => {\n\t\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\t\twindow.location.href = 'index.php?module=' + app.getModuleName() + '&view=ListView';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t * Register widgets events\n\t */\n\tregisterWidgetsEvents() {\n\t\t$('.js-widget-container').each(function () {\n\t\t\tconst typeWidget = $(this).data('type');\n\t\t\tlet className = 'Base_Widget_' + typeWidget + '_Js';\n\t\t\tif (typeof window[className] != 'undefined') {\n\t\t\t\treturn new window[className]().registerEvents($(this));\n\t\t\t}\n\t\t});\n\t}\n\t/**\n\t * Register related list events\n\t */\n\tregisterRelatedListEvents() {\n\t\tif (this.container.find('#mode').val() === 'relatedList') {\n\t\t\tlet className = app.getModuleName() + '_RelatedListView_Js';\n\t\t\tif (typeof window[className] != 'undefined') {\n\t\t\t\tnew window[className]().registerEvents(this.container.find('.js-form-container'));\n\t\t\t} else {\n\t\t\t\tlet className = 'Base_RelatedListView_Js';\n\t\t\t\tif (typeof window[className] != 'undefined') {\n\t\t\t\t\tnew window[className]().registerEvents(this.container.find('.js-form-container'));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t/**\n\t * Register keyboard shortcuts events\n\t */\n\tregisterKeyboardShortcutsEvent() {\n\t\tdocument.addEventListener('keydown', (event) => {\n\t\t\tif (event.altKey && event.code === 'KeyE') {\n\t\t\t\tthis.container.find('.js-edit-btn').trigger('click');\n\t\t\t}\n\t\t});\n\t}\n\t/**\n\t * Register detail view events.\n\t */\n\tregisterEvents() {\n\t\tthis.container = $('#page');\n\t\tthis.registerRecordEvents();\n\t\tthis.registerWidgetsEvents();\n\t\tthis.registerRelatedListEvents();\n\t\tthis.registerKeyboardShortcutsEvent();\n\t}\n};\n"],"names":["window","Base_DetailView_Js","container","on","e","app","showConfirmModal","title","translate","confirmedCallback","AppConnector","request","data","url","$","currentTarget","done","result","location","href","getModuleName","each","typeWidget","className","registerEvents","find","val","document","addEventListener","event","altKey","code","trigger","registerRecordEvents","registerWidgetsEvents","registerRelatedListEvents","registerKeyboardShortcutsEvent"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,0nBAEAA,MAAM,CAACC,kBAAP;AAEA;AACA,IACC,+BAAuB,CACtB,KAAKC,SAAL,CAAeC,EAAf,CAAkB,OAAlB,CAA2B,mBAA3B,CAAgD,SAACC,CAAD,CAAO,CACtDC,GAAG,CAACC,gBAAJ,CAAqB,CACpBC,KAAK,CAAEF,GAAG,CAACG,SAAJ,CAAc,wCAAd,CADa,CAEpBC,iBAAiB,CAAE,4BAAM,CACxBC,YAAY,CAACC,OAAb,CAAqB,CACpBC,IAAI,CAAE,EADc,CAEpBC,GAAG,CAAEC,CAAC,CAACV,CAAC,CAACW,aAAH,CAAD,CAAmBH,IAAnB,CAAwB,KAAxB,CAFe,CAArB,EAGGI,IAHH,CAGQ,SAACJ,IAAD,CAAU,CACbA,IAAI,CAACK,MADQ,GAEhBjB,MAAM,CAACkB,QAAP,CAAgBC,IAAhB,CAAuB,oBAAsBd,GAAG,CAACe,aAAJ,EAAtB,CAA4C,gBAFnD,EAIjB,CAPD,EAQA,CAXmB,CAArB,EAaA,CAdD,EAeA,CACD;AACD;AACA,yCACC,gCAAwB,CACvBN,CAAC,CAAC,sBAAD,CAAD,CAA0BO,IAA1B,CAA+B,UAAY,KACpCC,UAAU,CAAGR,CAAC,CAAC,IAAD,CAAD,CAAQF,IAAR,CAAa,MAAb,CADuB,CAEtCW,SAAS,CAAG,eAAiBD,UAAjB,CAA8B,KAFJ,CAG1C,GAAgC,WAA5B,SAAOtB,MAAM,CAACuB,SAAD,CAAjB,CACC,WAAWvB,MAAM,CAACuB,SAAD,CAAV,GAAwBC,cAAxB,CAAuCV,CAAC,CAAC,IAAD,CAAxC,CAER,CAND,EAOA,CACD;AACD;AACA,6CACC,oCAA4B,CAC3B,GAA2C,aAAvC,QAAKZ,SAAL,CAAeuB,IAAf,CAAoB,OAApB,EAA6BC,GAA7B,EAAJ,CAA0D,CACzD,IAAIH,SAAS,CAAGlB,GAAG,CAACe,aAAJ,GAAsB,qBAAtC,CACA,GAAgC,WAA5B,SAAOpB,MAAM,CAACuB,SAAD,CAAjB,CACC,IAAIvB,MAAM,CAACuB,SAAD,CAAV,GAAwBC,cAAxB,CAAuC,KAAKtB,SAAL,CAAeuB,IAAf,CAAoB,oBAApB,CAAvC,CADD,MAEO,CAE0B,WAA5B,SAAOzB,MAAM,wBAFX,EAGL,IAAIA,MAAM,wBAAV,GAAwBwB,cAAxB,CAAuC,KAAKtB,SAAL,CAAeuB,IAAf,CAAoB,oBAApB,CAAvC,EAED,CACD,CACD,CACD;AACD;AACA,kDACC,yCAAiC,gBAChCE,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,CAAqC,SAACC,KAAD,CAAW,CAC3CA,KAAK,CAACC,MAAN,EAA+B,MAAf,GAAAD,KAAK,CAACE,IADqB,EAE9C,KAAI,CAAC7B,SAAL,CAAeuB,IAAf,CAAoB,cAApB,EAAoCO,OAApC,CAA4C,OAA5C,EAED,CAJD,EAKA,CACD;AACD;AACA,kCACC,yBAAiB,CAChB,KAAK9B,SAAL,CAAiBY,CAAC,CAAC,OAAD,CADF,CAEhB,KAAKmB,oBAAL,EAFgB,CAGhB,KAAKC,qBAAL,EAHgB,CAIhB,KAAKC,yBAAL,EAJgB,CAKhB,KAAKC,8BAAL,GACA,CApEF;;"}