{"version":3,"file":"ListView.min.js","sources":["ListView.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nwindow.Base_ListView_Js = class {\n\t/**\n\t * Register data table\n\t */\n\tregisterDataTable() {\n\t\tthis.dataTable = app.registerDataTables(this.table, {\n\t\t\torder: [],\n\t\t\tprocessing: true,\n\t\t\tserverSide: true,\n\t\t\tsearching: false,\n\t\t\torderCellsTop: true,\n\t\t\tdeferRender: true,\n\t\t\tajax: {\n\t\t\t\turl: 'index.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: (data) => {\n\t\t\t\t\t$.extend(data, this.listForm.serializeFormData());\n\t\t\t\t},\n\t\t\t\terror: function (jqXHR, ajaxOptions, thrownError) {\n\t\t\t\t\tapp.errorLog(jqXHR, thrownError);\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: thrownError,\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\tstack: window.stackPage\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.listForm.find('input').on('change', () => {\n\t\t\tthis.dataTable.ajax.reload();\n\t\t});\n\t}\n\t/**\n\t * Register record events\n\t */\n\tregisterRecordEvents() {\n\t\tconst self = this;\n\t\tthis.table.on('click', '.js-delete-record', (e) => {\n\t\t\tapp.showNotifyConfirm(\n\t\t\t\t{\n\t\t\t\t\ttitle: app.translate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE')\n\t\t\t\t},\n\t\t\t\tfunction () {\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tdata: {},\n\t\t\t\t\t\turl: $(e.currentTarget).data('url')\n\t\t\t\t\t}).done((data) => {\n\t\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\t\tself.dataTable.ajax.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t\tthis.table.on('click', '.js-search-records', () => {\n\t\t\tthis.dataTable.ajax.reload();\n\t\t});\n\t\tthis.table.on('click', '.js-clear-search', () => {\n\t\t\tthis.table.find('.js-filter-field').each(function () {\n\t\t\t\tthis.value = '';\n\t\t\t});\n\t\t\tthis.dataTable.ajax.reload();\n\t\t});\n\t}\n\t/**\n\t * Register modal events.\n\t */\n\tregisterEvents() {\n\t\tthis.listForm = $('.js-form-container');\n\t\tthis.table = this.listForm.find('.js-list-view-table');\n\t\tthis.registerDataTable();\n\t\tthis.registerRecordEvents();\n\t}\n};\n"],"names":["window","Base_ListView_Js","dataTable","app","registerDataTables","table","order","processing","serverSide","searching","orderCellsTop","deferRender","ajax","url","type","data","$","extend","listForm","serializeFormData","error","jqXHR","ajaxOptions","thrownError","errorLog","showNotify","text","stack","stackPage","find","on","reload","self","e","showNotifyConfirm","title","translate","AppConnector","request","currentTarget","done","result","each","value","registerDataTable","registerRecordEvents"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAGAA,OAAOC,gBAAP;;IAAA,kCAIqB,gBACnB,KAAKC,SAAL,CAAiBC,IAAIC,kBAAJ,CAAuB,KAAKC,KAA5B,CAAmC,CACnDC,MAAO,EAD4C,CAEnDC,aAFmD,CAGnDC,aAHmD,CAInDC,YAJmD,CAKnDC,gBALmD,CAMnDC,cANmD,CAOnDC,KAAM,CACLC,IAAK,WADA,CAELC,KAAM,MAFD,CAGLC,KAAM,cAACA,KAAD,CAAU,CACfC,EAAEC,MAAF,CAASF,KAAT,CAAe,MAAKG,QAAL,CAAcC,iBAAd,EAAf,EACA,CALI,CAMLC,MAAO,eAAUC,KAAV,CAAiBC,WAAjB,CAA8BC,WAA9B,CAA2C,CACjDpB,IAAIqB,QAAJ,CAAaH,KAAb,CAAoBE,WAApB,CADiD,CAEjDpB,IAAIsB,UAAJ,CAAe,CACdC,KAAMH,WADQ,CAEdT,KAAM,OAFQ,CAGda,MAAO3B,OAAO4B,SAHA,CAAf,EAKA,CAbI,CAP6C,CAAnC,CADE,CAwBnB,KAAKV,QAAL,CAAcW,IAAd,CAAmB,OAAnB,EAA4BC,EAA5B,CAA+B,QAA/B,CAAyC,UAAM,CAC9C,MAAK5B,SAAL,CAAeU,IAAf,CAAoBmB,MAApB,GACA,CAFD,EAGA,CACD;;uEAGuB,iBAChBC,KAAO,IADS,CAEtB,KAAK3B,KAAL,CAAWyB,EAAX,CAAc,OAAd,CAAuB,mBAAvB,CAA4C,SAACG,CAAD,CAAO,CAClD9B,IAAI+B,iBAAJ,CACC,CACCC,MAAOhC,IAAIiC,SAAJ,CAAc,wCAAd,CADR,CADD,CAIC,UAAY,CACXC,aAAaC,OAAb,CAAqB,CACpBvB,KAAM,EADc,CAEpBF,IAAKG,EAAEiB,EAAEM,aAAJ,EAAmBxB,IAAnB,CAAwB,KAAxB,CAFe,CAArB,EAGGyB,IAHH,CAGQ,SAACzB,IAAD,CAAU,CACbA,KAAK0B,MADQ,EAEhBT,KAAK9B,SAAL,CAAeU,IAAf,CAAoBmB,MAApB,GAED,CAPD,EAQA,CAbF,EAeA,CAhBD,CAFsB,CAmBtB,KAAK1B,KAAL,CAAWyB,EAAX,CAAc,OAAd,CAAuB,oBAAvB,CAA6C,UAAM,CAClD,OAAK5B,SAAL,CAAeU,IAAf,CAAoBmB,MAApB,GACA,CAFD,CAnBsB,CAsBtB,KAAK1B,KAAL,CAAWyB,EAAX,CAAc,OAAd,CAAuB,kBAAvB,CAA2C,UAAM,CAChD,OAAKzB,KAAL,CAAWwB,IAAX,CAAgB,kBAAhB,EAAoCa,IAApC,CAAyC,UAAY,CACpD,KAAKC,KAAL,CAAa,GACb,CAFD,CADgD,CAIhD,OAAKzC,SAAL,CAAeU,IAAf,CAAoBmB,MAApB,GACA,CALD,EAMA,CACD;;2DAGiB,CAChB,KAAKb,QAAL,CAAgBF,EAAE,oBAAF,CADA,CAEhB,KAAKX,KAAL,CAAa,KAAKa,QAAL,CAAcW,IAAd,CAAmB,qBAAnB,CAFG,CAGhB,KAAKe,iBAAL,EAHgB,CAIhB,KAAKC,oBAAL,GACA,CAxEF"}