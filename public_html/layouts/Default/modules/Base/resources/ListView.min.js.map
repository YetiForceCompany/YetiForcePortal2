{"version":3,"file":"ListView.min.js","sources":["ListView.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n\njQuery.Class(\n\t'Base_ListView_Js',\n\t{},\n\t{\n\t\tregisterDataTable: function () {\n\t\t\tvar params = {};\n\t\t\tvar lengthMenu = app.getMainParams('listEntriesPerPage', true);\n\t\t\tif (lengthMenu) {\n\t\t\t\tparams.lengthMenu = lengthMenu;\n\t\t\t}\n\t\t\tparams.columnDefs = [{ orderable: false, targets: 0 }];\n\t\t\tparams.order = [];\n\t\t\tvar table = app.registerDataTables(jQuery('table.listViewEntries'), params);\n\t\t\tif (table) {\n\t\t\t\tjQuery(table.table().container()).find('.listViewEntries').removeClass('d-none');\n\t\t\t\ttable.$('.deleteRecordButton').on('click', function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tdata: {},\n\t\t\t\t\t\turl: element.data('url')\n\t\t\t\t\t}).then(\n\t\t\t\t\t\tfunction (data) {\n\t\t\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\t\t\ttable.row(element.closest('tr')).remove().draw();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction (e, err) {\n\t\t\t\t\t\t\tconsole.log([e, err]);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\ttable.$('.listViewEntries tbody tr').on('click', function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif ($.contains(jQuery(e.currentTarget).find('td:first-child').get(0), e.target)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tjQuery(e.currentTarget).find('.detailLink').trigger('click');\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn table;\n\t\t},\n\t\tregisterDeleteRecordClickEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar listViewContentDiv = this.getListViewContentContainer();\n\t\t\tlistViewContentDiv.on('click', '.deleteRecordButton', function (e) {\n\t\t\t\tvar elem = jQuery(e.currentTarget);\n\t\t\t\tvar recordId = elem.closest('tr').data('id');\n\t\t\t\tVtiger_List_Js.deleteRecord(recordId);\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis.registerDataTable();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerDataTable","lengthMenu","app","getMainParams","params","columnDefs","orderable","targets","order","registerDataTables","table","container","find","removeClass","$","on","e","stopPropagation","preventDefault","currentTarget","AppConnector","request","data","url","element","then","result","row","closest","remove","draw","err","console","log","contains","get","target","trigger","registerDeleteRecordClickEvent","thisInstance","listViewContentDiv","getListViewContentContainer","recordId","elem","Vtiger_List_Js","deleteRecord","registerEvents"],"mappings":";;AAAA,kKAEAA,OAAOC,KAAP,CACC,kBADD,CAEC,EAFD,CAGC,CACCC,kBAAmB,4BAAY,YACjB,EADiB,CAE1BC,WAAaC,IAAIC,aAAJ,CAAkB,oBAAlB,IAFa,CAG1BF,UAH0B,GAI7BG,OAAOH,UAAP,CAAoBA,UAJS,EAM9BG,OAAOC,UAAP,CAAoB,CAAC,CAAEC,YAAF,CAAoBC,QAAS,CAA7B,CAAD,CANU,CAO9BH,OAAOI,KAAP,CAAe,EAPe,CAQ9B,UAAYN,IAAIO,kBAAJ,CAAuBX,OAAO,uBAAP,CAAvB,CAAwDM,MAAxD,CAAZ,CA8BA,YAAA,GA5BCN,OAAOY,MAAMA,KAAN,GAAcC,SAAd,EAAP,EAAkCC,IAAlC,CAAuC,kBAAvC,EAA2DC,WAA3D,CAAuE,QAAvE,CA4BD,CA3BCH,MAAMI,CAAN,CAAQ,qBAAR,EAA+BC,EAA/B,CAAkC,OAAlC,CAA2C,SAAUC,CAAV,CAAa,CACvDA,EAAEC,eAAF,EADuD,CAEvDD,EAAEE,cAAF,EAFuD,CAGvD,YAAcpB,OAAOkB,EAAEG,aAAT,CAAd,CACAC,aAAaC,OAAb,CAAqB,CACpBC,KAAM,EADc,CAEpBC,IAAKC,QAAQF,IAAR,CAAa,KAAb,CAFe,CAArB,EAGGG,IAHH,CAIC,SAAUH,IAAV,CAAgB,CACXA,KAAKI,MADM,EAEdhB,MAAMiB,GAAN,CAAUH,QAAQI,OAAR,CAAgB,IAAhB,CAAV,EAAiCC,MAAjC,GAA0CC,IAA1C,GAED,CARF,CASC,SAAUd,CAAV,CAAae,GAAb,CAAkB,CACjBC,QAAQC,GAAR,CAAY,CAACjB,CAAD,CAAIe,GAAJ,CAAZ,EACA,CAXF,EAaA,CAjBD,CA2BD,CATCrB,MAAMI,CAAN,CAAQ,2BAAR,EAAqCC,EAArC,CAAwC,OAAxC,CAAiD,SAAUC,CAAV,CAAa,CAC7DA,EAAEC,eAAF,EAD6D,CAE7DD,EAAEE,cAAF,EAF6D,CAGzDJ,EAAEoB,QAAF,CAAWpC,OAAOkB,EAAEG,aAAT,EAAwBP,IAAxB,CAA6B,gBAA7B,EAA+CuB,GAA/C,CAAmD,CAAnD,CAAX,CAAkEnB,EAAEoB,MAApE,CAHyD,EAM7DtC,OAAOkB,EAAEG,aAAT,EAAwBP,IAAxB,CAA6B,aAA7B,EAA4CyB,OAA5C,CAAoD,OAApD,EACA,CAPD,CASD,EAAO3B,KACP,CAxCF,CAyCC4B,+BAAgC,yCAAY,CACvCC,IACAC,mBAAqB,KAAKC,2BAAL,GACzBD,mBAAmBzB,EAAnB,CAAsB,OAAtB,CAA+B,qBAA/B,CAAsD,SAAUC,CAAV,CAAa,UACvDlB,OAAOkB,EAAEG,aAAT,CADuD,CAE9DuB,SAAWC,KAAKf,OAAL,CAAa,IAAb,EAAmBN,IAAnB,CAAwB,IAAxB,CAFmD,CAGlEsB,eAAeC,YAAf,CAA4BH,QAA5B,CAHkE,CAIlE1B,EAAEC,eAAF,GACA,CALD,EAMA,CAlDF,CAmDC6B,eAAgB,yBAAY,CAC3B,KAAK9C,iBAAL,GACA,CArDF,CAHD"}