{"version":3,"file":"EditView.min.js","sources":["EditView.js"],"sourcesContent":["/**\n * Base edit view class\n *\n * @copyright YetiForce S.A.\n * @license YetiForce Public License 5.0 (licenses/LicenseEN.txt or yetiforce.com)\n * @author Mariusz Krzaczkowski <m.krzaczkowski@yetiforce.com>\n */\n'use strict';\n\nwindow.Base_EditView_Js = class {\n\t/**\n\t * Function to get Instance by name\n\t *\n\t * @param {string} moduleName Name of the module to create instance\n\t *\n\t * @returns {Base_EditView_Js}\n\t */\n\tstatic getInstanceByModuleName(moduleName) {\n\t\tif (typeof moduleName === 'undefined') {\n\t\t\tmoduleName = app.getModuleName();\n\t\t}\n\t\tlet modalClass = moduleName + '_EditView_Js',\n\t\t\tinstance;\n\t\tif (typeof window[modalClass] === 'undefined') {\n\t\t\tmodalClass = 'Base_EditView_Js';\n\t\t}\n\t\tif (typeof window[modalClass] !== 'undefined') {\n\t\t\tinstance = new window[modalClass]();\n\t\t}\n\t\tinstance.moduleName = moduleName;\n\t\treturn instance;\n\t}\n\t/**\n\t * Constructor.\n\t */\n\tconstructor() {\n\t\tthis.container = undefined;\n\t\tthis.form = undefined;\n\t\tthis.moduleName = undefined;\n\t}\n\t/**\n\t * Get container.\n\t */\n\tgetContainer() {\n\t\tif (this.container === undefined) {\n\t\t\tthis.container = jQuery('.mainContent');\n\t\t\tthis.form = this.container.find('form');\n\t\t\tthis.moduleName = this.form.find('[name=\"module\"]').val();\n\t\t}\n\t\treturn this.container;\n\t}\n\t/**\n\t * Register reference events.\n\t */\n\tregisterReferenceEvent() {\n\t\tthis.form.on('click', '.js-add-reference', (e) => {\n\t\t\tlet element = $(e.currentTarget);\n\t\t\tlet moduleName = element.data('moduleName');\n\t\t\tlet containerField = element.closest('.fieldValue');\n\t\t\tlet formData = this.form.serializeFormData();\n\t\t\tfor (let i in formData) {\n\t\t\t\tif (!formData[i] || $.inArray(i, ['_csrf', 'action', '_fromView']) != -1) {\n\t\t\t\t\tdelete formData[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tApp.Components.QuickCreate.createRecord(moduleName, {\n\t\t\t\tdata: {\n\t\t\t\t\tsourceRecordData: formData\n\t\t\t\t},\n\t\t\t\tcallbackAfterSave: (response) => {\n\t\t\t\t\tthis.setReferenceFieldValue(containerField, response);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tthis.form.on('click', '.js-clear-reference', (e) => {\n\t\t\tthis.clearFieldValue($(e.currentTarget));\n\t\t});\n\t\tthis.form.on('click', '.js-select-reference', (e) => {\n\t\t\tlet containerField = $(e.currentTarget).closest('.fieldValue');\n\t\t\tlet url = 'index.php?module=' + this.getReferencedModuleName(containerField) + '&view=RecordListModal';\n\t\t\tapp.getRecordList(url, (e) => {\n\t\t\t\tthis.setReferenceFieldValue(containerField, {\n\t\t\t\t\tid: e.currentTarget.dataset.id,\n\t\t\t\t\tname: e.currentTarget.dataset.name\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t\tthis.form.find('.js-reference-list').on('change', (e) => {\n\t\t\tlet element = $(e.currentTarget);\n\t\t\tlet parentElem = element.closest('.fieldValue');\n\t\t\tlet referenceModule = element.val();\n\t\t\tlet referenceModuleElement = $('.js-reference-module', parentElem);\n\t\t\tlet prevSelectedReferenceModule = referenceModuleElement.val();\n\t\t\treferenceModuleElement.val(referenceModule);\n\t\t\t$('.js-quick-create', parentElem).data('moduleName', referenceModule);\n\t\t\tif (prevSelectedReferenceModule != referenceModule) {\n\t\t\t\t//If Reference module is changed then we should clear the previous value\n\t\t\t\tparentElem.find('.js-clear-reference').trigger('click');\n\t\t\t}\n\t\t});\n\t}\n\t/**\n\t * Get referenced module name.\n\t *\n\t * @param {jQuery} parenElement\n\t */\n\tgetReferencedModuleName(parenElement) {\n\t\treturn $('.js-reference-module', parenElement).val();\n\t}\n\t/**\n\t * Clear field value.\n\t *\n\t * @param {jQuery} element\n\t */\n\tclearFieldValue(element) {\n\t\tlet fieldValueContender = element.closest('.fieldValue');\n\t\tlet fieldNameElement = fieldValueContender.find('.sourceField');\n\t\tlet fieldName = fieldNameElement.attr('name');\n\t\tfieldNameElement.val('');\n\t\tfieldValueContender.find(`input[data-display=\"${fieldName}\"]`).val('');\n\t}\n\t/**\n\t * Set reference field value.\n\t *\n\t * @param {jQuery} fieldContainer\n\t * @param {object} params\n\t */\n\tsetReferenceFieldValue(fieldContainer, params) {\n\t\tlet sourceField = fieldContainer.find('input.sourceField').attr('name');\n\t\tfieldContainer.find('input[name=\"' + sourceField + '\"]').val(params.id);\n\t\tfieldContainer.find(`input[data-display=\"${sourceField}\"]`).val(params.name);\n\t}\n\t/**\n\t * Register fields validations .\n\t */\n\tregisterFieldsValidations() {\n\t\tthis.form.validationEngine(app.validationEngineOptions);\n\t}\n\t/**\n\t * Register tree.\n\t */\n\tregisterTree() {\n\t\tthis.form.find('.js-tree-select').on('click', (e) => {\n\t\t\tlet containerField = $(e.currentTarget).closest('.js-tree-content'),\n\t\t\t\ttreeValueField = containerField.find('.js-tree-value'),\n\t\t\t\tfieldDisplayElement = containerField.find(`input[data-display=\"${treeValueField.attr('name')}\"]`),\n\t\t\t\tmultiple = treeValueField.data('multiple');\n\t\t\tapp.showModalWindow(containerField.find('.js-tree-modal-window').clone(), function (modalContainer) {\n\t\t\t\tlet jstreeInstance = modalContainer.find('.js-tree-jstree');\n\t\t\t\tif (multiple === 1) {\n\t\t\t\t\tnew window.App.Fields.MultiTree(jstreeInstance);\n\t\t\t\t} else {\n\t\t\t\t\tnew window.App.Fields.Tree(jstreeInstance);\n\t\t\t\t}\n\t\t\t\tmodalContainer.find('.js-tree-modal-select').on('click', function () {\n\t\t\t\t\tlet selectedCategories = [];\n\t\t\t\t\t$.each(jstreeInstance.jstree('get_selected', true), (index, value) => {\n\t\t\t\t\t\tselectedCategories.push(value);\n\t\t\t\t\t});\n\t\t\t\t\tif (selectedCategories.length != 0) {\n\t\t\t\t\t\tlet treeText = [];\n\t\t\t\t\t\tlet treeValue = [];\n\t\t\t\t\t\t$.each(selectedCategories, (index, value) => {\n\t\t\t\t\t\t\ttreeValue.push(value['original']['tree']);\n\t\t\t\t\t\t\ttreeText.push(value['text']);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfieldDisplayElement.val(treeText.join(','));\n\t\t\t\t\t\tfieldDisplayElement.attr('readonly', true);\n\t\t\t\t\t\ttreeValueField.val(treeValue.join(','));\n\t\t\t\t\t\tapp.hideModalWindow('', modalContainer.data('modalId'));\n\t\t\t\t\t\tPNotify.defaultStack.close();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: app.translate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t\tthis.form.find('.js-tree-clear').on('click', (e) => {\n\t\t\tlet containerField = $(e.currentTarget).closest('.js-tree-content'),\n\t\t\t\ttreeValueField = containerField.find('.js-tree-value'),\n\t\t\t\tfieldDisplayElement = containerField.find(`input[data-display=\"${treeValueField.attr('name')}\"]`);\n\t\t\tfieldDisplayElement.val('');\n\t\t\tfieldDisplayElement.attr('readonly', false);\n\t\t\ttreeValueField.val('');\n\t\t});\n\t}\n\t/**\n\t * Save record\n\t */\n\tsave(params) {\n\t\tif (!this.form.validationEngine('validate')) {\n\t\t\tapp.formAlignmentAfterValidation(this.form);\n\t\t\treturn;\n\t\t}\n\t\tconst callbackBeforeSave = params.callbackBeforeSave || function () {};\n\t\tconst callbackAfterSave = params.callbackAfterSave || function () {};\n\t\tlet progress = $.progressIndicator({\n\t\t\tmessage: app.translate('JS_SAVE_LOADER_INFO'),\n\t\t\tposition: 'html',\n\t\t\tblockInfo: {\n\t\t\t\tenabled: true\n\t\t\t}\n\t\t});\n\n\t\tlet beforeSaveResult = callbackBeforeSave(this.form.serializeFormData());\n\t\tif (beforeSaveResult === false) {\n\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\treturn;\n\t\t}\n\n\t\tlet formData = new FormData(this.form[0]);\n\t\tAppConnector.request({\n\t\t\turl: 'index.php',\n\t\t\ttype: 'POST',\n\t\t\tdata: formData,\n\t\t\tprocessData: false,\n\t\t\tcontentType: false\n\t\t})\n\t\t\t.done((response) => {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tif (response.success) {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: app.translate('JS_SAVE_NOTIFY_SUCCESS'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tcallbackAfterSave(response['result']);\n\t\t\t})\n\t\t\t.fail(function (textStatus, errorThrown, jqXHR) {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tcallbackAfterSave(false);\n\t\t\t\tapp.showNotify({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\ttitle: app.translate('JS_ERROR'),\n\t\t\t\t\ttext: jqXHR.responseJSON.error.message,\n\t\t\t\t\tanimation: 'show'\n\t\t\t\t});\n\t\t\t});\n\t}\n\t/**\n\t * Register edit view events\n\t */\n\tregisterEditViewEvents() {\n\t\tthis.registerSubmit({\n\t\t\tcallbackAfterSave: (response) => {\n\t\t\t\tif (response) {\n\t\t\t\t\twindow.location.href = 'index.php?module=' + this.moduleName + '&view=DetailView&record=' + response.id;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.container.find('.js-edit-back').on('click', () => {\n\t\t\twindow.history.back();\n\t\t});\n\t}\n\tregisterSubmit(params) {\n\t\tthis.container.find('.js-edit-view-submit, .js-form-submit').on('click', () => {\n\t\t\tthis.save(params);\n\t\t});\n\t}\n\t/**\n\t * Register keyboard shortcuts events\n\t */\n\tregisterKeyboardShortcutsEvent() {\n\t\tdocument.addEventListener('keydown', (event) => {\n\t\t\tif (event.altKey && event.code === 'KeyS') {\n\t\t\t\tthis.container.find('.js-edit-view-submit, .js-form-submit').trigger('click');\n\t\t\t}\n\t\t});\n\t}\n\t/**\n\t * Register form events.\n\t */\n\tregisterFormEvents() {\n\t\tthis.getContainer();\n\t\tthis.registerReferenceEvent();\n\t\tthis.registerFieldsValidations();\n\t\tthis.registerTree();\n\t\tthis.registerKeyboardShortcutsEvent();\n\t\tthis.form.find(':input').inputmask();\n\t}\n\t/**\n\t * Register edit view events.\n\t */\n\tregisterEvents() {\n\t\tthis.getContainer();\n\t\tthis.registerFormEvents();\n\t\tthis.registerEditViewEvents();\n\t}\n};\n"],"names":["window","Base_EditView_Js","container","form","moduleName","jQuery","find","val","on","e","$","currentTarget","element","data","containerField","closest","formData","serializeFormData","i","inArray","App","Components","QuickCreate","createRecord","sourceRecordData","callbackAfterSave","response","setReferenceFieldValue","clearFieldValue","url","getReferencedModuleName","app","getRecordList","id","dataset","name","parentElem","referenceModule","referenceModuleElement","prevSelectedReferenceModule","trigger","parenElement","fieldNameElement","fieldValueContender","fieldName","attr","fieldContainer","params","sourceField","validationEngine","validationEngineOptions","treeValueField","fieldDisplayElement","multiple","showModalWindow","clone","modalContainer","jstreeInstance","Fields","MultiTree","Tree","each","jstree","index","value","selectedCategories","push","length","treeValue","treeText","join","hideModalWindow","PNotify","defaultStack","close","showNotify","text","translate","type","formAlignmentAfterValidation","callbackBeforeSave","progress","progressIndicator","message","position","blockInfo","enabled","beforeSaveResult","mode","FormData","AppConnector","request","processData","contentType","done","success","fail","textStatus","errorThrown","jqXHR","title","responseJSON","error","animation","registerSubmit","location","href","history","back","save","document","addEventListener","event","altKey","code","getContainer","registerReferenceEvent","registerFieldsValidations","registerTree","registerKeyboardShortcutsEvent","inputmask","registerFormEvents","registerEditViewEvents","getModuleName","instance","modalClass"],"mappings":"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"}