{"version":3,"file":"EditView.min.js","sources":["EditView.js"],"sourcesContent":["/**\n * Base edit view class\n *\n * @copyright YetiForce Sp. z o.o.\n * @license YetiForce Public License 4.0 (licenses/LicenseEN.txt or yetiforce.com)\n * @author Mariusz Krzaczkowski <m.krzaczkowski@yetiforce.com>\n */\n'use strict';\n\nwindow.Base_EditView_Js = class {\n\t/**\n\t * Function to get Instance by name\n\t *\n\t * @param {string} moduleName Name of the module to create instance\n\t *\n\t * @returns {Base_EditView_Js}\n\t */\n\tstatic getInstanceByModuleName(moduleName) {\n\t\tif (typeof moduleName === 'undefined') {\n\t\t\tmoduleName = app.getModuleName();\n\t\t}\n\t\tlet modalClass = moduleName + '_EditView_Js',\n\t\t\tinstance;\n\t\tif (typeof window[modalClass] === 'undefined') {\n\t\t\tmodalClass = 'Base_EditView_Js';\n\t\t}\n\t\tif (typeof window[modalClass] !== 'undefined') {\n\t\t\tinstance = new window[modalClass]();\n\t\t}\n\t\tinstance.moduleName = moduleName;\n\t\treturn instance;\n\t}\n\t/**\n\t * Constructor.\n\t */\n\tconstructor() {\n\t\tthis.container = undefined;\n\t\tthis.form = undefined;\n\t\tthis.moduleName = undefined;\n\t}\n\t/**\n\t * Get container.\n\t */\n\tgetContainer() {\n\t\tif (this.container === undefined) {\n\t\t\tthis.container = jQuery('.mainContent');\n\t\t\tthis.form = this.container.find('form');\n\t\t\tthis.moduleName = this.form.find('[name=\"module\"]').val();\n\t\t}\n\t\treturn this.container;\n\t}\n\t/**\n\t * Register reference events.\n\t */\n\tregisterReferenceEvent() {\n\t\tthis.form.on('click', '.js-add-reference', (e) => {\n\t\t\tlet element = $(e.currentTarget);\n\t\t\tlet moduleName = element.data('moduleName');\n\t\t\tlet containerField = element.closest('.fieldValue');\n\t\t\tlet formData = this.form.serializeFormData();\n\t\t\tfor (let i in formData) {\n\t\t\t\tif (!formData[i] || $.inArray(i, ['_csrf', 'action', '_fromView']) != -1) {\n\t\t\t\t\tdelete formData[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tApp.Components.QuickCreate.createRecord(moduleName, {\n\t\t\t\tdata: {\n\t\t\t\t\tsourceRecordData: formData\n\t\t\t\t},\n\t\t\t\tcallbackAfterSave: (response) => {\n\t\t\t\t\tthis.setReferenceFieldValue(containerField, response);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tthis.form.on('click', '.js-clear-reference', (e) => {\n\t\t\tthis.clearFieldValue($(e.currentTarget));\n\t\t});\n\t\tthis.form.on('click', '.js-select-reference', (e) => {\n\t\t\tlet containerField = $(e.currentTarget).closest('.fieldValue');\n\t\t\tlet url = 'index.php?module=' + this.getReferencedModuleName(containerField) + '&view=RecordListModal';\n\t\t\tapp.getRecordList(url, (e) => {\n\t\t\t\tthis.setReferenceFieldValue(containerField, {\n\t\t\t\t\tid: e.currentTarget.dataset.id,\n\t\t\t\t\tname: e.currentTarget.dataset.name\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t\tthis.form.find('.js-reference-list').on('change', (e) => {\n\t\t\tlet element = $(e.currentTarget);\n\t\t\tlet parentElem = element.closest('.fieldValue');\n\t\t\tlet referenceModule = element.val();\n\t\t\tlet referenceModuleElement = $('.js-reference-module', parentElem);\n\t\t\tlet prevSelectedReferenceModule = referenceModuleElement.val();\n\t\t\treferenceModuleElement.val(referenceModule);\n\t\t\t$('.js-quick-create', parentElem).data('moduleName', referenceModule);\n\t\t\tif (prevSelectedReferenceModule != referenceModule) {\n\t\t\t\t//If Reference module is changed then we should clear the previous value\n\t\t\t\tparentElem.find('.js-clear-reference').trigger('click');\n\t\t\t}\n\t\t});\n\t}\n\t/**\n\t * Get referenced module name.\n\t *\n\t * @param {jQuery} parenElement\n\t */\n\tgetReferencedModuleName(parenElement) {\n\t\treturn $('.js-reference-module', parenElement).val();\n\t}\n\t/**\n\t * Clear field value.\n\t *\n\t * @param {jQuery} element\n\t */\n\tclearFieldValue(element) {\n\t\tlet fieldValueContender = element.closest('.fieldValue');\n\t\tlet fieldNameElement = fieldValueContender.find('.sourceField');\n\t\tlet fieldName = fieldNameElement.attr('name');\n\t\tfieldNameElement.val('');\n\t\tfieldValueContender.find(`input[data-display=\"${fieldName}\"]`).val('');\n\t}\n\t/**\n\t * Set reference field value.\n\t *\n\t * @param {jQuery} fieldContainer\n\t * @param {object} params\n\t */\n\tsetReferenceFieldValue(fieldContainer, params) {\n\t\tlet sourceField = fieldContainer.find('input.sourceField').attr('name');\n\t\tfieldContainer.find('input[name=\"' + sourceField + '\"]').val(params.id);\n\t\tfieldContainer.find(`input[data-display=\"${sourceField}\"]`).val(params.name);\n\t}\n\t/**\n\t * Register fields validations .\n\t */\n\tregisterFieldsValidations() {\n\t\tthis.form.validationEngine(app.validationEngineOptions);\n\t}\n\t/**\n\t * Register tree.\n\t */\n\tregisterTree() {\n\t\tthis.form.find('.js-tree-select').on('click', (e) => {\n\t\t\tlet containerField = $(e.currentTarget).closest('.js-tree-content'),\n\t\t\t\ttreeValueField = containerField.find('.js-tree-value'),\n\t\t\t\tfieldDisplayElement = containerField.find(`input[data-display=\"${treeValueField.attr('name')}\"]`),\n\t\t\t\tmultiple = treeValueField.data('multiple');\n\t\t\tapp.showModalWindow(containerField.find('.js-tree-modal-window').clone(), function (modalContainer) {\n\t\t\t\tlet jstreeInstance = modalContainer.find('.js-tree-jstree');\n\t\t\t\tif (multiple === 1) {\n\t\t\t\t\tnew window.App.Fields.MultiTree(jstreeInstance);\n\t\t\t\t} else {\n\t\t\t\t\tnew window.App.Fields.Tree(jstreeInstance);\n\t\t\t\t}\n\t\t\t\tmodalContainer.find('.js-tree-modal-select').on('click', function () {\n\t\t\t\t\tlet selectedCategories = [];\n\t\t\t\t\t$.each(jstreeInstance.jstree('get_selected', true), (index, value) => {\n\t\t\t\t\t\tselectedCategories.push(value);\n\t\t\t\t\t});\n\t\t\t\t\tif (selectedCategories.length != 0) {\n\t\t\t\t\t\tlet treeText = [];\n\t\t\t\t\t\tlet treeValue = [];\n\t\t\t\t\t\t$.each(selectedCategories, (index, value) => {\n\t\t\t\t\t\t\ttreeValue.push(value['original']['tree']);\n\t\t\t\t\t\t\ttreeText.push(value['text']);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfieldDisplayElement.val(treeText.join(','));\n\t\t\t\t\t\tfieldDisplayElement.attr('readonly', true);\n\t\t\t\t\t\ttreeValueField.val(treeValue.join(','));\n\t\t\t\t\t\tapp.hideModalWindow('', modalContainer.data('modalId'));\n\t\t\t\t\t\tPNotify.defaultStack.close();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: app.translate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t\tthis.form.find('.js-tree-clear').on('click', (e) => {\n\t\t\tlet containerField = $(e.currentTarget).closest('.js-tree-content'),\n\t\t\t\ttreeValueField = containerField.find('.js-tree-value'),\n\t\t\t\tfieldDisplayElement = containerField.find(`input[data-display=\"${treeValueField.attr('name')}\"]`);\n\t\t\tfieldDisplayElement.val('');\n\t\t\tfieldDisplayElement.attr('readonly', false);\n\t\t\ttreeValueField.val('');\n\t\t});\n\t}\n\t/**\n\t * Save record\n\t */\n\tsave(params) {\n\t\tif (!this.form.validationEngine('validate')) {\n\t\t\tapp.formAlignmentAfterValidation(this.form);\n\t\t\treturn;\n\t\t}\n\t\tconst callbackBeforeSave = params.callbackBeforeSave || function () {};\n\t\tconst callbackAfterSave = params.callbackAfterSave || function () {};\n\t\tlet progress = $.progressIndicator({\n\t\t\tmessage: app.translate('JS_SAVE_LOADER_INFO'),\n\t\t\tposition: 'html',\n\t\t\tblockInfo: {\n\t\t\t\tenabled: true\n\t\t\t}\n\t\t});\n\n\t\tlet beforeSaveResult = callbackBeforeSave(this.form.serializeFormData());\n\t\tif (beforeSaveResult === false) {\n\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\treturn;\n\t\t}\n\n\t\tlet formData = new FormData(this.form[0]);\n\t\tAppConnector.request({\n\t\t\turl: 'index.php',\n\t\t\ttype: 'POST',\n\t\t\tdata: formData,\n\t\t\tprocessData: false,\n\t\t\tcontentType: false\n\t\t})\n\t\t\t.done((response) => {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tif (response.success) {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: app.translate('JS_SAVE_NOTIFY_SUCCESS'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tcallbackAfterSave(response['result']);\n\t\t\t})\n\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\tcallbackAfterSave(false);\n\t\t\t\tapp.showNotify({\n\t\t\t\t\ttext: errorThrown,\n\t\t\t\t\ttitle: app.translate('JS_ERROR'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t});\n\t}\n\t/**\n\t * Register edit view events\n\t */\n\tregisterEditViewEvents() {\n\t\tthis.registerSubmit({\n\t\t\tcallbackAfterSave: (response) => {\n\t\t\t\tif (response) {\n\t\t\t\t\twindow.location.href = 'index.php?module=' + this.moduleName + '&view=DetailView&record=' + response.id;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.container.find('.js-edit-back').on('click', () => {\n\t\t\twindow.history.back();\n\t\t});\n\t}\n\tregisterSubmit(params) {\n\t\tthis.container.find('.js-edit-view-submit, .js-form-submit').on('click', () => {\n\t\t\tthis.save(params);\n\t\t});\n\t}\n\t/**\n\t * Register form events.\n\t */\n\tregisterFormEvents() {\n\t\tthis.getContainer();\n\t\tthis.registerReferenceEvent();\n\t\tthis.registerFieldsValidations();\n\t\tthis.registerTree();\n\t\tthis.form.find(':input').inputmask();\n\t}\n\t/**\n\t * Register edit view events.\n\t */\n\tregisterEvents() {\n\t\tthis.getContainer();\n\t\tthis.registerFormEvents();\n\t\tthis.registerEditViewEvents();\n\t}\n};\n"],"names":["window","Base_EditView_Js","container","form","moduleName","app","getModuleName","modalClass","instance","jQuery","find","val","on","e","$","currentTarget","element","data","containerField","closest","formData","serializeFormData","i","inArray","App","Components","QuickCreate","createRecord","sourceRecordData","callbackAfterSave","response","setReferenceFieldValue","clearFieldValue","url","getReferencedModuleName","getRecordList","id","dataset","name","parentElem","referenceModule","referenceModuleElement","prevSelectedReferenceModule","trigger","parenElement","fieldNameElement","fieldValueContender","fieldName","attr","fieldContainer","params","sourceField","validationEngine","validationEngineOptions","treeValueField","fieldDisplayElement","multiple","showModalWindow","clone","modalContainer","Fields","MultiTree","jstreeInstance","Tree","each","jstree","index","value","selectedCategories","push","length","treeValue","treeText","join","hideModalWindow","PNotify","defaultStack","close","showNotify","text","translate","type","formAlignmentAfterValidation","callbackBeforeSave","progress","progressIndicator","message","position","blockInfo","enabled","beforeSaveResult","mode","AppConnector","request","processData","contentType","done","success","fail","textStatus","errorThrown","title","registerSubmit","location","href","history","back","save","getContainer","registerReferenceEvent","registerFieldsValidations","registerTree","inputmask","registerFormEvents","registerEditViewEvents"],"mappings":"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"}