'use strict';

var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

var createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();

/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */window.App.Fields={Picklist:{/**
		 * Function which will convert ui of select boxes.
		 * @params parent - select element
		 * @params view - select2
		 * @params viewParams - select2 params
		 * @returns jquery object list which represents changed select elements
		 */changeSelectElementView:function changeSelectElementView(parent,view,viewParams){var _this=this;if('undefined'==typeof parent&&(parent=$('body')),'undefined'==typeof view){var select2Elements=$('select.select2',parent).toArray();return void select2Elements.forEach(function(elem){_this.changeSelectElementView($(elem),'select2',viewParams);})}//If view is select2, This will convert the ui of select boxes to select2 elements.
return 'select2'===view?App.Fields.Picklist.showSelect2ElementView(parent,viewParams):void app.errorLog(new Error('Unknown select type ['+view+']'))},/**
		 * Function which will show the select2 element for select boxes . This will use select2 library
		 */showSelect2ElementView:function showSelect2ElementView(selectElement,params){var _this2=this,self=this;if(selectElement=$(selectElement),'undefined'==typeof params&&(params={}),1<$(selectElement).length)return $(selectElement).each(function(index,element){_this2.showSelect2ElementView($(element).eq(0),params);});if('undefined'==typeof params.dropdownParent){var modalParent=$(selectElement).closest('.modal-body');modalParent.length&&(params.dropdownParent=modalParent);}var data=selectElement.data();null!=data&&(params=$.extend(data,params)),params.language={},params.theme='bootstrap';var width=$(selectElement).data('width');params.width='undefined'==typeof width?'100%':width,params.containerCssClass='form-control w-100';var containerCssClass=selectElement.data('containerCssClass');//formatSelectionTooBig param is not defined even it has the maximumSelectionLength,
//then we should send our custom function for formatSelectionTooBig
if('undefined'!=typeof containerCssClass&&(params.containerCssClass+=' '+containerCssClass),params.language.noResults=function(){return app.translate('JS_NO_RESULTS_FOUND')},'undefined'!=typeof params.customSortOptGroup&&params.customSortOptGroup&&($('optgroup',selectElement).each(function(){var optgroup=$(this),options=optgroup.children().toArray().sort(function(a,b){var aText=$(a).text(),bText=$(b).text();return aText<bText?1:-1});$.each(options,function(i,v){optgroup.prepend(v);});}),delete params.customSortOptGroup),'undefined'!=typeof params.maximumSelectionLength&&'undefined'==typeof params.formatSelectionTooBig){var limit=params.maximumSelectionLength,formatSelectionExceeds=function(){// return app.translate('JS_YOU_CAN_SELECT_ONLY') + ' ' + limit.maximum + ' ' + app.translate('JS_ITEMS');
};//custom function which will return the maximum selection size exceeds message.
params.language.maximumSelected=formatSelectionExceeds;}if(('undefined'==typeof selectElement.attr('multiple')||params.placeholder)&&params.placeholder,'undefined'==typeof params.templateResult&&(params.templateResult=function(data,container){return data.element&&data.element.className&&$(container).addClass(data.element.className),'undefined'==typeof data.name?data.text:'optgroup'==data.type?'<strong>'+data.name+'</strong>':'<span>'+data.name+'</span>'}),'undefined'==typeof params.templateSelection&&(params.templateSelection=function(data,container){return data.element&&data.element.className&&$(container).addClass(data.element.className),''===data.text?data.name:data.text}),1===selectElement.data('ajaxSearch')){params.tags=!1,params.placeholder='',params.ajax={url:selectElement.data('ajaxUrl'),dataType:'json',delay:250,method:'POST',data:function(params){return {value:params.term,// search term
page:params.page}},processResults:function processResults(data){var items=new Array;return !0==data.success&&(selectElement.find('option').each(function(){var currentTarget=$(this);items.push({label:currentTarget.html(),value:currentTarget.val()});}),items=items.concat(data.result.items)),{results:items,pagination:{more:!1}}},cache:!1},params.escapeMarkup=function(markup){if('undefined'!==markup)return markup};var minimumInputLength=3;'undefined'!==selectElement.data('minimumInput')&&(minimumInputLength=selectElement.data('minimumInput')),params.minimumInputLength=minimumInputLength,params.templateResult=function(data){return 'undefined'==typeof data.name?data.text:'optgroup'==data.type?'<strong>'+data.name+'</strong>':'<span>'+data.name+'</span>'},params.templateSelection=function(data){return ''===data.text?data.name:data.text};}return selectElement.each(function(){var select=$(this);if('readonly'==select.attr('readonly')&&!select.attr('disabled')){var selectNew=select.clone().addClass('d-none');select.parent().append(selectNew),select.prop('disabled',!0);}var htmlBoolParams=select.data('select');'tags'===htmlBoolParams?(params.tags=!0,params.tokenSeparators=[',']):params[htmlBoolParams]=!0,select.select2(params).on('select2:open',function(e){select.data('unselecting')&&(select.removeData('unselecting'),setTimeout(function(){select.each(function(){$(this).select2('close');});},1));var element=$(e.currentTarget),instance=element.data('select2');instance.$dropdown.css('z-index',1000002);}).on('select2:unselect',function(){select.data('unselecting',!0);}),select.hasClass('js-select2-sortable')&&self.registerSelect2Sortable(select,params.sortableCb);}),selectElement},/**
		 * Register select2 drag and drop sorting
		 * @param {jQuery} select2 element
		 * @param {function} callback function
		 */registerSelect2Sortable:function registerSelect2Sortable(select){var cb=1<arguments.length&&arguments[1]!==void 0?arguments[1]:function(){},ul=select.next('.select2-container').first('ul.select2-selection__rendered');ul.sortable({items:'li:not(.select2-search__field)',tolerance:'pointer',stop:function stop(){$(ul.find('.select2-selection__choice').get().reverse()).each(function(){var optionTitle=$(this).attr('title');select.find('option').each(function(){$(this).text()===optionTitle&&select.prepend($(this));});}),cb(select);}});}},Tree:function(){function Tree(){var treeContainer=0<arguments.length&&void 0!==arguments[0]?arguments[0]:$('.js-tree-container');classCallCheck(this,Tree),0<treeContainer.length&&(this.treeInstance=treeContainer,this.loadTree());}/**
		 * Get instance of Tree.
		 * @returns {Tree}
		 */return createClass(Tree,[{key:'loadTree',value:function loadTree(){this.generateTree(JSON.parse(this.treeInstance.find('.js-tree-data').val()));}},{key:'generateTree',value:function generateTree(treeData){this.treeInstance.jstree({core:{data:treeData,multiple:!1,themes:{name:'proton',responsive:!0}}});}}],[{key:'getInstance',value:function getInstance(){var container=0<arguments.length&&void 0!==arguments[0]?arguments[0]:$('.js-tree-container');return 'undefined'==typeof window.App.Fields.Tree.instance&&(window.App.Fields.Tree.instance=new window.App.Fields.Tree(container)),window.App.Fields.Tree.instance}}]),Tree}(),Integer:{/**
		 * Function returns the integer in user specified format.
		 * @param {number} value
		 * @param {int} numberOfDecimal
		 * @returns {string}
		 */formatToDisplay:function formatToDisplay(value){value||(value=0);var groupSeparator=app.getMainParams('currencyGroupingSeparator'),groupingPattern=app.getMainParams('currencyGroupingPattern');value=parseFloat(value).toFixed(1);var integer=value.toString().split('.')[0];return 3<integer.length&&('123,456,789'===groupingPattern?integer=integer.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,'$1'+groupSeparator):'123456,789'===groupingPattern?integer=integer.slice(0,-3)+groupSeparator+integer.slice(-3):'12,34,56,789'===groupingPattern&&(integer=integer.slice(0,-3).replace(/(\d)(?=(\d\d)+(?!\d))/g,'$1'+groupSeparator)+groupSeparator+integer.slice(-3))),integer}},Double:{/**
		 * Function returns the currency in user specified format.
		 * @param {number} value
		 * @param {boolean} numberOfDecimal
		 * @param {int} numberOfDecimal
		 * @returns {string}
		 */formatToDisplay:function formatToDisplay(value){var fixed=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1],numberOfDecimal=2<arguments.length&&arguments[2]!==void 0?arguments[2]:app.getMainParams('numberOfCurrencyDecimal');value||(value=0),value=parseFloat(value),fixed&&(value=value.toFixed(numberOfDecimal));var a=value.toString().split('.'),integer=App.Fields.Integer.formatToDisplay(a[0]),decimal=a[1];if(numberOfDecimal){if(app.getMainParams('truncateTrailingZeros')&&decimal){for(var d='',i=0;i<decimal.length;i++)'0'!==decimal[decimal.length-i-1]&&(d=decimal[decimal.length-i-1]+d);decimal=d;}if(decimal)return integer+app.getMainParams('currencyDecimalSeparator')+decimal}return integer}}};
//# sourceMappingURL=Fields.min.js.map
