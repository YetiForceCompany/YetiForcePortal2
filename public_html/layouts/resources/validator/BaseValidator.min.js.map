{"version":3,"file":"BaseValidator.min.js","sources":["BaseValidator.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\njQuery.Class(\n\t'Base_Validator_Js',\n\t{\n\t\tmoduleName: false,\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function (field, rules, i, options) {\n\t\t\t//If validation engine already maked the field as error\n\t\t\t// we dont want to proceed\n\t\t\tif (typeof options != 'undefined') {\n\t\t\t\tif (options.isError == true) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar listOfValidators = Base_Validator_Js.getValidator(field);\n\t\t\tfor (var i = 0; i < listOfValidators.length; i++) {\n\t\t\t\tvar validatorList = listOfValidators[i];\n\t\t\t\tvar validatorName = validatorList.name;\n\t\t\t\tvar validatorInstance = new validatorName();\n\t\t\t\tvalidatorInstance.setElement(field);\n\t\t\t\tif (validatorList.hasOwnProperty('params')) {\n\t\t\t\t\tvar result = validatorInstance.validate(validatorList.params);\n\t\t\t\t} else {\n\t\t\t\t\tvar result = validatorInstance.validate();\n\t\t\t\t}\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn validatorInstance.getError();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t *Function which gets the complete list of validators based on type and data-validator\n\t\t *@param accepts field element as parameter\n\t\t * @return list of validators for field\n\t\t */\n\t\tgetValidator: function (field) {\n\t\t\tvar listOfValidators = new Array();\n\t\t\tvar fieldData = field.data();\n\t\t\tvar fieldInfo = fieldData.fieldinfo;\n\t\t\tif (typeof fieldInfo == 'string') {\n\t\t\t\tfieldInfo = JSON.parse(fieldInfo);\n\t\t\t}\n\t\t\tvar dataValidator = 'validator';\n\t\t\tvar moduleEle = field.closest('form').find('[name=\"module\"]');\n\t\t\tif (Base_Validator_Js.moduleName == false && moduleEle.length > 0) {\n\t\t\t\tBase_Validator_Js.moduleName = moduleEle.val();\n\t\t\t}\n\n\t\t\tvar fieldInstance = Base_Field_Js.getInstance(fieldInfo);\n\t\t\tvar validatorsOfType = Base_Validator_Js.getValidatorsFromFieldType(fieldInstance);\n\t\t\tfor (var key in validatorsOfType) {\n\t\t\t\t//IE for loop fix\n\t\t\t\tif (!validatorsOfType.hasOwnProperty(key)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvar value = validatorsOfType[key];\n\t\t\t\tif (value != '') {\n\t\t\t\t\tvar tempValidator = { name: value };\n\t\t\t\t\tlistOfValidators.push(tempValidator);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (fieldData.hasOwnProperty(dataValidator)) {\n\t\t\t\tvar specialValidators = fieldData[dataValidator];\n\t\t\t\tfor (var key in specialValidators) {\n\t\t\t\t\t//IE for loop fix\n\t\t\t\t\tif (!specialValidators.hasOwnProperty(key)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tvar specialValidator = specialValidators[key];\n\t\t\t\t\tvar tempSpecialValidator = jQuery.extend({}, specialValidator);\n\t\t\t\t\tvar validatorOfNames = Base_Validator_Js.getValidatorClassName(specialValidator.name);\n\t\t\t\t\tif (validatorOfNames != '') {\n\t\t\t\t\t\ttempSpecialValidator.name = validatorOfNames;\n\t\t\t\t\t\tif (!jQuery.isEmptyObject(tempSpecialValidator)) {\n\t\t\t\t\t\t\tlistOfValidators.push(tempSpecialValidator);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn listOfValidators;\n\t\t},\n\t\t/**\n\t\t *Function which gets the list of validators based on data type of field\n\t\t *@param accepts fieldInstance as parameter\n\t\t * @return list of validators for particular field type\n\t\t */\n\t\tgetValidatorsFromFieldType: function (fieldInstance) {\n\t\t\tvar fieldType = fieldInstance.getType();\n\t\t\tvar validatorsOfType = new Array();\n\t\t\tfieldType = fieldType.charAt(0).toUpperCase() + fieldType.slice(1).toLowerCase();\n\t\t\tvalidatorsOfType.push(Base_Validator_Js.getValidatorClassName(fieldType));\n\t\t\treturn validatorsOfType;\n\t\t},\n\t\tgetValidatorClassName: function (validatorName) {\n\t\t\tvar validatorsOfType = '';\n\t\t\tvar className = Base_Validator_Js.getClassName(validatorName);\n\t\t\tvar fallBackClassName = Base_Validator_Js.getFallBackClassName(validatorName);\n\t\t\tif (typeof window[className] != 'undefined') {\n\t\t\t\tvalidatorsOfType = window[className];\n\t\t\t} else if (typeof window[fallBackClassName] != 'undefined') {\n\t\t\t\tvalidatorsOfType = window[fallBackClassName];\n\t\t\t}\n\t\t\treturn validatorsOfType;\n\t\t},\n\t\t/**\n\t\t *Function which gets validator className\n\t\t *@param accepts validatorName as parameter\n\t\t * @return module specific validator className\n\t\t */\n\t\tgetClassName: function (validatorName) {\n\t\t\tif (Base_Validator_Js.moduleName != false) {\n\t\t\t\tvar moduleName = Base_Validator_Js.moduleName;\n\t\t\t} else {\n\t\t\t\tvar moduleName = app.getModuleName();\n\t\t\t}\n\n\t\t\tif (moduleName == 'Events') {\n\t\t\t\tmoduleName = 'Calendar';\n\t\t\t}\n\n\t\t\treturn moduleName + '_' + validatorName + '_Validator_Js';\n\t\t},\n\t\t/**\n\t\t *Function which gets validator className\n\t\t *@param accepts validatorName as parameter\n\t\t * @return generic validator className\n\t\t */\n\t\tgetFallBackClassName: function (validatorName) {\n\t\t\treturn 'Base_' + validatorName + '_Validator_Js';\n\t\t}\n\t},\n\t{\n\t\tfield: '',\n\t\terror: '',\n\t\t/**\n\t\t *Function which validates the field data\n\t\t * @return true\n\t\t */\n\t\tvalidate: function () {\n\t\t\treturn true;\n\t\t},\n\t\t/**\n\t\t *Function which gets error message\n\t\t * @return error message\n\t\t */\n\t\tgetError: function () {\n\t\t\tif (this.error != null) {\n\t\t\t\treturn this.error;\n\t\t\t}\n\t\t\treturn 'Validation Failed';\n\t\t},\n\t\t/**\n\t\t *Function which sets error message\n\t\t * @return Instance\n\t\t */\n\t\tsetError: function (errorInfo) {\n\t\t\tthis.error = errorInfo;\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t *Function which sets field attribute of class\n\t\t * @return Instance\n\t\t */\n\t\tsetElement: function (field) {\n\t\t\tthis.field = field;\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t *Function which gets field attribute of class\n\t\t * @return Instance\n\t\t */\n\t\tgetElement: function () {\n\t\t\treturn this.field;\n\t\t},\n\t\t/**\n\t\t *Function which gets trimed field value\n\t\t * @return fieldValue\n\t\t */\n\t\tgetFieldValue: function () {\n\t\t\tvar field = this.getElement();\n\t\t\treturn jQuery.trim(field.val());\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","moduleName","invokeValidation","field","rules","i","options","isError","listOfValidators","Base_Validator_Js","getValidator","length","validatorList","validatorName","name","validatorInstance","setElement","hasOwnProperty","result","validate","params","getError","Array","fieldData","data","fieldInfo","fieldinfo","JSON","parse","moduleEle","closest","find","val","fieldInstance","Base_Field_Js","getInstance","validatorsOfType","getValidatorsFromFieldType","key","value","push","specialValidators","specialValidator","tempSpecialValidator","extend","validatorOfNames","getValidatorClassName","isEmptyObject","fieldType","getType","charAt","toUpperCase","slice","toLowerCase","className","getClassName","fallBackClassName","getFallBackClassName","window","app","getModuleName","error","setError","errorInfo","getElement","getFieldValue","trim"],"mappings":"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"}