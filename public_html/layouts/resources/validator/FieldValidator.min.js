Vtiger_Base_Validator_Js("Vtiger_Email_Validator_Js",{invokeValidation:function(e,f,d,c){var a=new Vtiger_Email_Validator_Js();a.setElement(e);var b=a.validate();if(b!=true){return a.getError()}}},{validate:function(){var a=this.getFieldValue();return this.validateValue(a)},validateValue:function(e){var a=/^[_/a-zA-Z0-9*]+([!"#$%&'()*+,./:;<=>?\^_`{|}~-]?[a-zA-Z0-9/_/-])*@[a-zA-Z0-9]+([\_\-\.]?[a-zA-Z0-9]+)*\.([\-\_]?[a-zA-Z0-9])+(\.?[a-zA-Z0-9]+)?$/;var d=/[\(\)\<\>\,\;\:\\\"\[\]]/;if(!a.test(e)){this.setError(app.translate("JS_PLEASE_ENTER_VALID_EMAIL_ADDRESS"));return false}else{if(e.match(d)){this.setError(app.translate("JS_CONTAINS_ILLEGAL_CHARACTERS"));return false}}var f=this.getElement();var b=f.data();var c=b.fieldinfo;if(c&&c.restrictedDomains&&c.restrictedDomains.indexOf(e.split("@").pop())!=-1){this.setError(app.translate("JS_EMAIL_RESTRICTED_DOMAINS"));return false}return true}});Vtiger_Base_Validator_Js("Vtiger_UserName_Validator_Js",{invokeValidation:function(e,f,c,b){var d=new Vtiger_UserName_Validator_Js();d.setElement(e);var a=d.validate();if(a!=true){return d.getError()}}},{validate:function(){var c=this.getFieldValue();var b=/^[a-zA-Z0-9_.@]{3,32}$/;var a=b.test(c);if(!a){var d=app.translate("JS_CONTAINS_ILLEGAL_CHARACTERS");this.setError(d);return false}return true}});Vtiger_Base_Validator_Js("Vtiger_PositiveNumber_Validator_Js",{invokeValidation:function(e,f,d,b){var c=new Vtiger_PositiveNumber_Validator_Js();c.setElement(e);var a=c.validate();if(a!=true){return c.getError()}}},{validate:function(){var b=this.getFieldValue();var a=/(^[-]+\d+)$/;parseFieldValue=app.parseNumberToFloat(this.getFieldValue());if(isNaN(parseFieldValue)||b<0||b.match(a)){var c=app.translate("JS_ACCEPT_POSITIVE_NUMBER");this.setError(c);return false}return true}});Vtiger_Base_Validator_Js("Vtiger_Integer_Validator_Js",{invokeValidation:function(e,f,d,c){var b=new Vtiger_Integer_Validator_Js();b.setElement(e);var a=b.validate();if(a!=true){return b.getError()}}},{validate:function(){var c=this.getFieldValue();var a=/(^[-+]?\d+)$/;var b=/(^[-+]?\d?).\d+$/;if((!c.match(a))){if(!c.match(b)){var d=app.translate("JS_PLEASE_ENTER_INTEGER_VALUE");this.setError(d);return false}else{return true}}else{return true}}});Vtiger_PositiveNumber_Validator_Js("Vtiger_Percentage_Validator_Js",{invokeValidation:function(e,f,d,b){var c=new Vtiger_Percentage_Validator_Js();c.setElement(e);var a=c.validate();if(a!=true){return c.getError()}}},{validate:function(){var a=this._super();if(a!=true){return a}else{var b=this.getFieldValue();if(b>100){var c=app.translate("JS_PERCENTAGE_VALUE_SHOULD_BE_LESS_THAN_100");this.setError(c);return false}return true}}});Vtiger_Base_Validator_Js("Vtiger_Url_Validator_Js",{},{validate:function(){var c=this.getFieldValue();var b=/(^|\s)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/gi;var a=b.test(c);if(!a){if(c.indexOf("http://")===0||c.indexOf("https://")===0||c.indexOf("www.")===0){a=true}}if(!a){var d=app.translate("JS_CONTAINS_ILLEGAL_CHARACTERS");this.setError(d);return false}return true}});Vtiger_Base_Validator_Js("Vtiger_MultiSelect_Validator_Js",{invokeValidation:function(e,f,d,c){var b=new Vtiger_MultiSelect_Validator_Js();b.setElement(e);var a=b.validate();if(a==true){return a}else{return b.getError()}}},{validate:function(){var a=this.getElement();var b=a.val();if(b==null){var c=app.translate("JS_PLEASE_SELECT_ATLEAST_ONE_OPTION");this.setError(c);return false}return true}});Vtiger_Email_Validator_Js("Vtiger_MultiEmails_Validator_Js",{invokeValidation:function(c){var b=new Vtiger_MultiEmails_Validator_Js();b.setElement(c);var a=b.validate();if(!a){return b.getError()}}},{validate:function(){var c=this.getElement();var b=c.val();if(b!=""){var e=b.split(",");var d;for(d=0;d<e.length;++d){var a=this.validateValue(e[d]);if(a==false){return a}}return true}}});Vtiger_PositiveNumber_Validator_Js("Vtiger_GreaterThanZero_Validator_Js",{invokeValidation:function(e,f,d,c){var a=new Vtiger_GreaterThanZero_Validator_Js();a.setElement(e);var b=a.validate();if(b!=true){return a.getError()}}},{validate:function(){var a=this._super();if(a!=true){return a}else{var b=this.getFieldValue();if(b==0){var c=app.translate("JS_VALUE_SHOULD_BE_GREATER_THAN_ZERO");this.setError(c);return false}}return true}});Vtiger_PositiveNumber_Validator_Js("Vtiger_WholeNumber_Validator_Js",{invokeValidation:function(e,f,d,c){var a=new Vtiger_WholeNumber_Validator_Js();a.setElement(e);var b=a.validate();if(b!=true){return a.getError()}}},{validate:function(){var a=this._super();if(a!=true){return a}var e=this.getElement();var d=this.getFieldValue();var b=e.data();var c=b.fieldinfo;if((d%1)!=0){if(!jQuery.isEmptyObject(c)){var f=app.translate("INVALID_NUMBER_OF")+" "+c.label}else{var f=app.translate("INVALID_NUMBER")}this.setError(f);return false}return true}});Vtiger_Base_Validator_Js("Vtiger_lessThanToday_Validator_Js",{},{validate:function(){var h=this.getElement();var c=h.data();var j=c.dateFormat;var a=c.fieldinfo;var b=this.getFieldValue();try{var e=Vtiger_Helper_Js.getDateInstance(b,j)}catch(d){this.setError(d);return false}e.setHours(0,0,0,0);var g=new Date();g.setHours(0,0,0,0);var f=g-e;if(f<=0){var i=a.label+" "+app.translate("JS_SHOULD_BE_LESS_THAN_CURRENT_DATE");this.setError(i);return false}return true}});Vtiger_Base_Validator_Js("Vtiger_lessThanOrEqualToToday_Validator_Js",{},{validate:function(){var h=this.getElement();var c=h.data();var j=c.dateFormat;var a=c.fieldinfo;var b=this.getFieldValue();try{var e=Vtiger_Helper_Js.getDateInstance(b,j)}catch(d){this.setError(d);return false}e.setHours(0,0,0,0);var g=new Date();g.setHours(0,0,0,0);var f=g-e;if(f<0){var i=a.label+" "+app.translate("JS_SHOULD_BE_LESS_THAN_OR_EQUAL_TO")+" "+app.translate("JS_CURRENT_DATE");this.setError(i);return false}return true}});Vtiger_Base_Validator_Js("Vtiger_greaterThanOrEqualToToday_Validator_Js",{},{validate:function(){var h=this.getElement();var c=h.data();var j=c.dateFormat;var a=c.fieldinfo;var b=this.getFieldValue();try{var e=Vtiger_Helper_Js.getDateInstance(b,j)}catch(d){this.setError(d);return false}e.setHours(0,0,0,0);var g=new Date();g.setHours(0,0,0,0);var f=g-e;if(f>0){var i=a.label+" "+app.translate("JS_SHOULD_BE_GREATER_THAN_OR_EQUAL_TO")+" "+app.translate("JS_CURRENT_DATE");this.setError(i);return false}return true}});Vtiger_Base_Validator_Js("Vtiger_greaterThanDependentField_Validator_Js",{invokeValidation:function(f,g,e,d){var h=f[0];if(jQuery(h).attr("name")=="followup_date_start"){var b=new Array("date_start")}var a=new Vtiger_greaterThanDependentField_Validator_Js();a.setElement(f);var c=a.validate(b);if(c!=true){return a.getError()}}},{validate:function(d){var m=this.getElement();var a=m.data("fieldinfo");var c;if(typeof a=="undefined"){c=jQuery(m).attr("name")}else{c=a.label}var k=m.closest("form");for(var h=0;h<d.length;h++){var l=d[h];var f=jQuery("input[name="+l+"]",k);if(f.length>0){var b=f.data("fieldinfo").label;var g=this.getDateTimeInstance(m);var e=this.getDateTimeInstance(f);var j=g-e;if(j<0){var n=c+" "+app.translate("JS_SHOULD_BE_GREATER_THAN_OR_EQUAL_TO")+" "+b+"";this.setError(n);return false}}}return true},getDateTimeInstance:function(e){var a=e.data("dateFormat");var c=e.val();try{var d=Vtiger_Helper_Js.getDateInstance(c,a)}catch(b){this.setError(b);return false}return d}});Vtiger_Base_Validator_Js("Vtiger_dateAndTimeGreaterThanDependentField_Validator_Js",{},{fieldDateTime:"",fieldDateTimeInstance:[],dateFormat:"",validate:function(c){var m=this;var l=this.getElement();var b="";var n=[];var g=l.closest("form");var k=g.attr("name");if(k=="EditView"){return true}var e=0;for(var f=0;f<c.length;f++){var h=c[f];var d=jQuery("input[name="+h+"]",g);if(d.length>0){if(typeof d.data("dateFormat")=="undefined"&&b){b+=" "+d.val();n[e]=Vtiger_Helper_Js.getDateInstance(b,a);e++}else{if(typeof d.data("dateFormat")!="undefined"){var a=d.data("dateFormat");b=d.val()}}}}return m.difference(n)},difference:function(b){if(b.length==2){var a=b[1]-b[0];if(a<0){var c=app.translate("JS_AN_INCORRECT_RANGE_OF_DATES_WAS_ENTERED");this.setError(c);return false}}return true}});Vtiger_Base_Validator_Js("Vtiger_futureEventCannotBeHeld_Validator_Js",{},{validate:function(e){var p=this.getElement();var c=p.data("fieldinfo").label;var j=p.val();var m=p.closest("form");for(var k=0;k<e.length;k++){var o=e[k];var h=jQuery("input[name="+o+"]",m);if(h.length>0){var b=h.data("fieldinfo").label;var n=new Date();var a=h.data("dateFormat");var f=jQuery("input[name=time_start]",m);var d=h.val()+" "+f.val();var g=Vtiger_Helper_Js.getDateInstance(d,a);var l=n-g;if(l<0&&j=="Held"){var q=c+" "+app.translate("JS_FUTURE_EVENT_CANNOT_BE_HELD")+" "+b+"";this.setError(q);return false}}}return true}});Vtiger_Base_Validator_Js("Vtiger_lessThanDependentField_Validator_Js",{},{validate:function(c){var l=this.getElement();var a=l.data("fieldinfo").label;var j=l.closest("form");if(l.val().length==0){return}for(var g=0;g<c.length;g++){var k=c[g];var e=jQuery("input[name="+k+"]",j);if(e.length>0){var b=e.data("fieldinfo").label;var f=this.getDateTimeInstance(l);if(e.val().length==0){continue}var d=this.getDateTimeInstance(e);var h=f-d;if(h>0){var m=a+" "+app.translate("JS_SHOULD_BE_LESS_THAN_OR_EQUAL_TO")+" "+b+"";this.setError(m);return false}}}return true},getDateTimeInstance:function(e){var a=e.data("dateFormat");var c=e.val();try{var d=Vtiger_Helper_Js.getDateInstance(c,a)}catch(b){this.setError(b);return false}return d}});Vtiger_Base_Validator_Js("Vtiger_Currency_Validator_Js",{invokeValidation:function(d,e,c,b){var f=new Vtiger_Currency_Validator_Js();f.setElement(d);var a=f.validate();if(a!=true){return f.getError()}}},{validate:function(){var b=this._super();if(b!=true){return b}var g=this.getElement();var f=this.getFieldValue();var c=g.data();var e=f.replace(c.decimalSeparator,"");var a=/\s/;if(a.test(c.decimalSeparator)||a.test(c.groupSeparator)){e=e.replace(/ /g,"")}var h;if(c.groupSeparator=="$"){c.groupSeparator="\\$"}var d=new RegExp(c.groupSeparator,"g");e=e.replace(d,"");if(isNaN(e)){h=app.translate("JS_CONTAINS_ILLEGAL_CHARACTERS");this.setError(h);return false}if(e<0){h=app.translate("JS_ACCEPT_POSITIVE_NUMBER");this.setError(h);return false}return true}});Vtiger_Base_Validator_Js("Vtiger_NumberUserFormat_Validator_Js",{invokeValidation:function(e,f,d,c){var a=new Vtiger_NumberUserFormat_Validator_Js();a.setElement(e);var b=a.validate();if(b!=true){return a.getError()}}},{validate:function(){var b=this._super();if(b!=true){return b}var f=this.getFieldValue();var d=app.getMainParams("currencyDecimalSeparator");var c=app.getMainParams("currencyGroupingSeparator");f=f.split(c).join("");var a=/\s/;if(a.test(d)||a.test(c)){f=f.replace(/ /g,"")}var e=f.replace(d,".");var g;if(isNaN(e)){g=app.translate("JS_CONTAINS_ILLEGAL_CHARACTERS");this.setError(g);return false}if(e<0){g=app.translate("JS_ACCEPT_POSITIVE_NUMBER");this.setError(g);return false}e=parseFloat(e);if(e!=e.toString()){g=app.translate("JS_CONTAINS_ILLEGAL_CHARACTERS");this.setError(g);return false}return true}});Vtiger_Base_Validator_Js("Vtiger_ReferenceField_Validator_Js",{},{validate:function(){var c=this.getElement();var a=c.closest(".fieldValue");var d=a.find(".sourceField");var f=d.val();var b=d.data().fieldinfo;if(f==""){var e=app.translate("JS_REQUIRED_FIELD");this.setError(e);return false}return true}});Vtiger_Integer_Validator_Js("Vtiger_Double_Validator_Js",{},{validate:function(){var a=this._super();if(a==false){var b=this.getFieldValue();if(b!==""){var c=/(^[-+]?\d+)[,.]\d+$/;if(!b.match(c)){var d=app.translate("JS_PLEASE_ENTER_DECIMAL_VALUE");this.setError(d);return false}}return true}return a}});Vtiger_Base_Validator_Js("Vtiger_Date_Validator_Js",{invokeValidation:function(e,f,d,c){var b=new Vtiger_Date_Validator_Js();b.setElement(e);var a=b.validate();if(a!=true){return b.getError()}return a}},{validate:function(){var e=this.getElement();var b=e.data();var a=b.fieldinfo["date-format"];var d=this.getFieldValue();try{Vtiger_Helper_Js.getDateInstance(d,a)}catch(c){var f=app.translate("JS_PLEASE_ENTER_VALID_DATE");this.setError(f);return false}return true}});Vtiger_Base_Validator_Js("Vtiger_Time_Validator_Js",{invokeValidation:function(e,f,d,c){var b=new Vtiger_Time_Validator_Js();b.setElement(e);var a=b.validate();if(a==true){return a}else{return b.getError()}}},{validate:function(){var b=this.getFieldValue();var c=b.replace(b.match(/[AP]M/i),"");var a=c.split(":");if(isNaN(a[0])&&isNaN(a[1])){var d=app.translate("JS_PLEASE_ENTER_VALID_TIME");this.setError(d);return false}return true}});Vtiger_greaterThanDependentField_Validator_Js("Calendar_greaterThanDependentField_Validator_Js",{},{getDateTimeInstance:function(e){var d=e.closest("form");if(e.attr("name")=="date_start"){var c=d.find('[name="time_start"]');var f=c.val()}else{if(e.attr("name")=="due_date"){var c=d.find('[name="time_end"]');if(c.length>0){var f=c.val()}else{f="11:59 PM"}}}var b=e.val()+" "+f;var a=e.data("dateFormat");return Vtiger_Helper_Js.getDateInstance(b,a)}});Vtiger_Base_Validator_Js("Calendar_greaterThanToday_Validator_Js",{},{validate:function(){var h=this.getElement();var c=h.data();var j=c.dateFormat;var a=c.fieldinfo;var b=this.getFieldValue();try{var e=Vtiger_Helper_Js.getDateInstance(b,j)}catch(d){this.setError(d);return false}e.setHours(0,0,0,0);var g=new Date();g.setHours(0,0,0,0);var f=g-e;if(f>=0){var i=a.label+" "+app.translate("JS_SHOULD_BE_GREATER_THAN_CURRENT_DATE");this.setError(i);return false}return true}});Vtiger_Base_Validator_Js("Calendar_RepeatMonthDate_Validator_Js",{invokeValidation:function(e,f,d,c){var b=new Calendar_RepeatMonthDate_Validator_Js();b.setElement(e);var a=b.validate();if(a!=true){return b.getError()}}},{validate:function(){var b=this.getFieldValue();if((parseInt(parseFloat(b)))!=b||b==""||parseInt(b)>"31"||parseInt(b)<=0){var a=app.translate("JS_NUMBER_SHOULD_BE_LESS_THAN_32");this.setError(a);return false}return true}});Vtiger_WholeNumber_Validator_Js("Vtiger_WholeNumberGreaterThanZero_Validator_Js",{invokeValidation:function(e,f,d,c){var a=new Vtiger_WholeNumberGreaterThanZero_Validator_Js();a.setElement(e);var b=a.validate();if(b!=true){return a.getError()}}},{validate:function(){var a=this._super();if(a!=true){return a}else{var b=this.getFieldValue();if(b==0){var c=app.translate("JS_VALUE_SHOULD_BE_GREATER_THAN_ZERO");this.setError(c);return false}}return true}});Vtiger_Base_Validator_Js("Vtiger_AlphaNumeric_Validator_Js",{invokeValidation:function(e,f,d,c){var a=new Vtiger_AlphaNumeric_Validator_Js();a.setElement(e);var b=a.validate();if(b!=true){return a.getError()}}},{validate:function(){var c=this.getElement();var b=c.val();var a=/^[a-z0-9 _-]*$/i;if(!b.match(a)){var d=app.translate("JS_CONTAINS_ILLEGAL_CHARACTERS");this.setError(d);return false}return true}});Vtiger_Base_Validator_Js("Vtiger_AlphaNumericWithSlashesCurlyBraces_Validator_Js",{invokeValidation:function(e,f,d,c){var a=new Vtiger_AlphaNumericWithSlashesCurlyBraces_Validator_Js();a.setElement(e);var b=a.validate();if(b!=true){return a.getError()}}},{validate:function(){var c=this.getElement();var b=c.val();var a=/^[\/a-z\\0-9{} _-]*$/i;if(!b.match(a)){var d=app.translate("JS_CONTAINS_ILLEGAL_CHARACTERS");this.setError(d);return false}return true}});Vtiger_Base_Validator_Js("Vtiger_InputMask_Validator_Js",{invokeValidation:function(e,f,d,c){var b=new Vtiger_InputMask_Validator_Js();b.setElement(e);var a=b.validate();if(a!=true){return b.getError()}}},{validate:function(){var a=this._super();if(a!=true){return a}var d=this.getElement();var c=d.val();if(d.inputmask("hasMaskedValue")){var b=d.inputmask("unmaskedvalue");var e=d.inputmask("getmetadata");var g=(e.match(/9/g)||[]).length+(e.match(/A/g)||[]).length+(e.match(/'*'/g)||[]).length;if(b.length!=0&&g>b.length){var f=app.translate("JS_INVALID_LENGTH");this.setError(f);window.inputMaskValidation=true;return false}else{window.inputMaskValidation=false}}if(window.inputMaskValidation){var f=app.translate("JS_INVALID_LENGTH");this.setError(f);return false}return true}});