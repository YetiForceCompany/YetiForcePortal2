
jQuery.Class("Vtiger_Base_Validator_Js",{moduleName:false,invokeValidation:function(f,g,c,j){if(typeof j!="undefined"){if(j.isError==true){return}}var d=Vtiger_Base_Validator_Js.getValidator(f);for(var c=0;c<d.length;c++){var e=d[c];var a=e.name;var b=new a();b.setElement(f);if(e.hasOwnProperty("params")){var h=b.validate(e.params)}else{var h=b.validate()}if(!h){return b.getError()}}},getValidator:function(j){var h=new Array();var b=j.data();var a=b.fieldinfo;if(typeof a=="string"){a=JSON.parse(a)}var l="validator";var i=j.closest("form").find('[name="module"]');if(Vtiger_Base_Validator_Js.moduleName==false&&i.length>0){Vtiger_Base_Validator_Js.moduleName=i.val()}var n=Vtiger_Field_Js.getInstance(a);var c=Vtiger_Base_Validator_Js.getValidatorsFromFieldType(n);for(var m in c){if(!c.hasOwnProperty(m)){continue}var k=c[m];if(k!=""){var f={name:k};h.push(f)}}if(b.hasOwnProperty(l)){var d=b[l];for(var m in d){if(!d.hasOwnProperty(m)){continue}var g=d[m];var e=jQuery.extend({},g);var o=Vtiger_Base_Validator_Js.getValidatorClassName(g.name);if(o!=""){e.name=o;if(!jQuery.isEmptyObject(e)){h.push(e)}}}}return h},getValidatorsFromFieldType:function(c){var b=c.getType();var a=new Array();b=b.charAt(0).toUpperCase()+b.slice(1).toLowerCase();a.push(Vtiger_Base_Validator_Js.getValidatorClassName(b));return a},getValidatorClassName:function(d){var b="";var c=Vtiger_Base_Validator_Js.getClassName(d);var a=Vtiger_Base_Validator_Js.getFallBackClassName(d);if(typeof window[c]!="undefined"){b=(window[c])}else{if(typeof window[a]!="undefined"){b=(window[a])}}return b},getClassName:function(b){if(Vtiger_Base_Validator_Js.moduleName!=false){var a=Vtiger_Base_Validator_Js.moduleName}else{var a=app.getModuleName()}if(a=="Events"){a="Calendar"}return a+"_"+b+"_Validator_Js"},getFallBackClassName:function(a){return"Vtiger_"+a+"_Validator_Js"}},{field:"",error:"",validate:function(){return true},getError:function(){if(this.error!=null){return this.error}return"Validation Failed"},setError:function(a){this.error=a;return this},setElement:function(a){this.field=a;return this},getElement:function(){return this.field},getFieldValue:function(){var a=this.getElement();return jQuery.trim(a.val())}});