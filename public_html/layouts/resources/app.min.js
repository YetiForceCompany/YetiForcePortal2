'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
  return typeof obj;
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

window.App={};var AppConnector,app={/**
		 * Events in application
		 */event:new function(){this.el=$({}),this.trigger=function(){this.el.trigger(arguments[0],Array.prototype.slice.call(arguments,1));},this.on=function(){this.el.on.apply(this.el,arguments);},this.one=function(){this.el.one.apply(this.el,arguments);},this.off=function(){this.el.off.apply(this.el,arguments);};},languageString:[],cacheParams:[],/**
		 * Function to get the module name. This function will get the value from element which has id module
		 * @return : string - module name
		 */getModuleName:function getModuleName(){return app.getMainParams('module')},/**
		 * Function to get the module name. This function will get the value from element which has id module
		 * @return : string - module name
		 */getParentModuleName:function getParentModuleName(){return this.getMainParams('parent')},/**
		 * Function returns the current view name
		 */getViewName:function getViewName(){return app.getMainParams('view')},/**
		 * Function returns the javascript controller based on the current view
		 */getPageController:function getPageController(){var moduleName=app.getModuleName(),view=app.getViewName(),moduleClassName=moduleName+'_'+view+'_Js',extendModules=jQuery('#extendModules').val();if('undefined'==typeof window[moduleClassName]&&null!=extendModules&&(moduleClassName=extendModules+'_'+view+'_Js'),'undefined'==typeof window[moduleClassName]&&(moduleClassName='Base_'+view+'_Js'),'undefined'!=typeof window[moduleClassName])return new window[moduleClassName]},validationEngineOptions:{// Avoid scroll decision and let it scroll up page when form is too big
// Reference: http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/
scroll:!1,promptPosition:'topLeft',//to support validation for chosen select box
prettySelect:!0,useSuffix:'_chosen',usePrefix:'s2id_'},formatDate:function formatDate(date){var y=date.getFullYear(),m=date.getMonth()+1,d=date.getDate(),h=date.getHours(),i=date.getMinutes(),s=date.getSeconds();return y+'-'+this.formatDateZ(m)+'-'+this.formatDateZ(d)+' '+this.formatDateZ(h)+':'+this.formatDateZ(i)+':'+this.formatDateZ(s)},formatDateZ:function formatDateZ(i){return 9>=i?'0'+i:i},howManyDaysFromDate:function howManyDaysFromDate(time){var fromTime=time.getTime(),today=new Date,toTime=new Date(today.getFullYear(),today.getMonth(),today.getDate()).getTime();return Math.floor((toTime-fromTime)/86400000)+1},parseFieldInfo:function parseFieldInfo(fieldInfo){return JSON.parse(fieldInfo)},parseNumberToFloat:function parseNumberToFloat(val){var groupSeparator=app.getMainParams('currencyGroupingSeparator'),decimalSeparator=app.getMainParams('currencyDecimalSeparator');return (void 0===val||''===val)&&(val=0),val=val.toString(),val=val.split(groupSeparator).join(''),val=val.replace(/\s/g,'').replace(decimalSeparator,'.'),parseFloat(val)},registerSelectField:function registerSelectField(container){this.registerChznSelectField(container),App.Fields.Picklist.changeSelectElementView(container);},/**
		 * Register time field.
		 *
		 * @param {object} container
		 */registerTimeField:function registerTimeField(container){this.registerEventForClockPicker(),App.Fields.Date.register(container),App.Fields.Date.registerRange(container);},/**
		 * Register event for clock picker.
		 * @param {object} timeInputs
		 */registerEventForClockPicker:function registerEventForClockPicker(){var timeInputs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:$('.clockPicker');if(timeInputs.hasClass('clockPicker')||(timeInputs=timeInputs.find('.clockPicker')),!!timeInputs.length){var params={placement:'bottom',autoclose:!0,minutestep:5};$('.js-clock__btn').on('click',function(e){e.stopPropagation();var tempElement=$(e.currentTarget).closest('.time').find('input.clockPicker');'disabled'!==tempElement.attr('disabled')&&'readonly'!==tempElement.attr('readonly')&&tempElement.clockpicker('show');});var formatTimeString=function(timeInput){if(params.twelvehour){var meridiemTime='';params.afterDone=function(){//format time string after picking a value
var timeString=timeInput.val(),timeStringFormatted=timeString.slice(0,timeString.length-2)+' '+meridiemTime;timeInput.val(timeStringFormatted),app.event.trigger('Clockpicker.changed',timeInput);},params.beforeHide=function(){meridiemTime=$('.clockpicker-buttons-am-pm:visible').find('a:not(.text-white-50)').text();};}else params.afterDone=function(){app.event.trigger('Clockpicker.changed',timeInput);};};timeInputs.each(function(i,e){var timeInput=$(e),formatTime=timeInputs.data('format')||app.getMainParams('hourFormat');params.twelvehour=12===parseInt(formatTime),formatTimeString(timeInput),timeInput.clockpicker(params);});}},registerChznSelectField:function registerChznSelectField(parent,view,params){var thisInstance=this;'undefined'==typeof parent&&(parent=jQuery('body')),'undefined'==typeof params&&(params={});var selectElement=jQuery('.chzn-select',parent);selectElement.each(function(){0==$(this).prop('id').length&&$(this).attr('id','sel'+thisInstance.generateRandomChar()+thisInstance.generateRandomChar()+thisInstance.generateRandomChar());}),selectElement.filter('[multiple]').filter('[data-validation-engine*="validate"]').on('change',function(e){jQuery(e.currentTarget).trigger('focusout');});var params={no_results_text:app.translate('JS_NO_RESULTS_FOUND')+':'},moduleName=app.getModuleName();selectElement.filter('[multiple]')&&(params.placeholder_text_multiple=' '+app.translate('JS_SELECT_SOME_OPTIONS')),params.placeholder_text_single=' '+app.translate('JS_SELECT_AN_OPTION'),selectElement.chosen(params),selectElement.each(function(){var select=$(this);// hide selected items in the chosen instance when item is hidden.
if(select.hasClass('hideSelected')){var ns=[];select.find('optgroup,option').each(function(n){jQuery(this).hasClass('d-none')&&ns.push(n);}),ns.length&&select.next().find('.search-choice-close').each(function(){var element=jQuery(this),index=element.data('option-array-index');-1!=jQuery.inArray(index,ns)&&element.closest('li').remove();});}'readonly'==select.attr('readonly')&&(select.on('chosen:updated',function(){if(select.attr('readonly')){var wasDisabled=select.is(':disabled'),selectData=select.data('chosen');select.attr('disabled','disabled'),'object'==('undefined'==typeof selectData?'undefined':_typeof(selectData))&&selectData.search_field_disabled(),wasDisabled?select.attr('disabled','disabled'):select.removeAttr('disabled');}}),select.trigger('chosen:updated'));});// Improve the display of default text (placeholder)
var chosenSelectConainer=jQuery('.chosen-container-multi .default').css('width','100%');return chosenSelectConainer},registerSelect2Field:function registerSelect2Field(parent,params){var thisInstance=this;'undefined'==typeof parent&&(parent=jQuery('body')),'undefined'==typeof params&&(params={});var selectElement=jQuery('.select2',parent);//params.theme = "bootstrap";
params.language={},params.width='100%',selectElement.each(function(){0==$(this).prop('id').length&&$(this).attr('id','sel'+thisInstance.generateRandomChar()+thisInstance.generateRandomChar()+thisInstance.generateRandomChar()),$(this).select2(params);});},getUrlParam:function getUrlParam(name){var sParameterName,i,sPageURL=decodeURIComponent(window.location.search.substring(1)),sURLVariables=sPageURL.split('&');for(i=0;i<sURLVariables.length;i++)if(sParameterName=sURLVariables[i].split('='),sParameterName[0]===name)return void 0===sParameterName[1]||sParameterName[1]},generateRandomChar:function generateRandomChar(){var chars,newchar,rand;return chars='0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ',rand=Math.floor(Math.random()*chars.length),newchar=chars.substring(rand,rand+1)},registerSideLoading:function registerSideLoading(){$(document).pjax('a[href]:not(.loadPage)','div.bodyContent'),$(document).on('pjax:complete',function(){var pageController=app.getPageController();pageController&&pageController.registerEvents();});},translate:function translate(key){if(app.languageString[key]!=null)return app.languageString[key];var strings=jQuery('#js_strings').text();return ''!=strings&&(app.languageString=JSON.parse(strings),key in app.languageString)?app.languageString[key]:key},registerDataTables:function registerDataTables(table){var options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return null!=$.fn.dataTable&&0!=table.length&&($.extend($.fn.dataTable.defaults,{language:{sLengthMenu:app.translate('JS_S_LENGTH_MENU'),sZeroRecords:app.translate('JS_NO_RESULTS_FOUND'),sInfo:app.translate('JS_S_INFO'),sInfoEmpty:app.translate('JS_S_INFO_EMPTY'),sSearch:app.translate('JS_SEARCH'),sEmptyTable:app.translate('JS_NO_RESULTS_FOUND'),sInfoFiltered:app.translate('JS_S_INFO_FILTERED'),sLoadingRecords:app.translate('JS_LOADING_OF_RECORDS'),sProcessing:app.translate('JS_LOADING_OF_RECORDS'),oPaginate:{sFirst:app.translate('JS_S_FIRST'),sPrevious:app.translate('JS_S_PREVIOUS'),sNext:app.translate('JS_S_NEXT'),sLast:app.translate('JS_S_LAST')},oAria:{sSortAscending:app.translate('JS_S_SORT_ASCENDING'),sSortDescending:app.translate('JS_S_SORT_DESCENDING')}}}),table.DataTable(options))},/**
		 * Function to register event for ckeditor for description field
		 *
		 * @param {object} container
		 */registerEventForEditor:function registerEventForEditor(container){var _this=this;$.each(container.find('.js-editor:not(.js-inventory-item-comment)'),function(key,data){_this.loadEditorElement($(data));});},/**
		 * Load editor element.
		 *
		 * @param {object} noteContentElement
		 */loadEditorElement:function loadEditorElement(noteContentElement){App.Fields.Text.Editor.register(noteContentElement);},getMainParams:function getMainParams(param,json){if(null==app.cacheParams[param]){var value=$('#'+param).val();app.cacheParams[param]=value;}var value=app.cacheParams[param];return json&&(''==value?value=[]:value=$.parseJSON(value)),value},setMainParams:function setMainParams(param,value){app.cacheParams[param]=value,$('#'+param).val(value);},registerModal:function registerModal(container){'undefined'==typeof container&&(container=$('body')),container.off('click','button.showModal, a.showModal, .js-show-modal').on('click','button.showModal, a.showModal, .js-show-modal',function(e){e.preventDefault();var currentElement=$(e.currentTarget),url=currentElement.data('url');if('undefined'!=typeof url){currentElement.hasClass('js-popover-tooltip')&&currentElement.popover('hide'),currentElement.hasClass('disabledOnClick')&&currentElement.attr('disabled',!0);var modalWindowParams={url:url,cb:function cb(container){var call=currentElement.data('cb');if('undefined'!=typeof call)if(-1!==call.indexOf('.')){var callerArray=call.split('.');('object'===_typeof(window[callerArray[0]])||'function'==typeof window[callerArray[0]])&&window[callerArray[0]][callerArray[1]](container);}else 'function'==typeof window[call]&&window[call](container);currentElement.removeAttr('disabled');}};currentElement.data('modalid')&&(modalWindowParams.id=currentElement.data('modalid')),app.showModalWindow(modalWindowParams);}e.stopPropagation();}),container.off('click','.js-show-modal-content').on('click','.js-show-modal-content',function(e){e.preventDefault();var currentElement=$(e.currentTarget),content=currentElement.data('content'),title='',modalClass='';currentElement.data('title')&&(title=currentElement.data('title')),currentElement.data('class')&&(modalClass=currentElement.data('class')),app.showModalWindow('<div class="modal" tabindex="-1" role="dialog"><div class="modal-dialog '+modalClass+'" role="document"><div class="modal-content">\n\t\t\t\t<div class="modal-header"> <h5 class="modal-title">'+title+'</h5>\n\t\t\t\t  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n\t\t\t\t</div><div class="modal-body text-break">'+content+'</div></div></div></div>'),e.stopPropagation();});},/**
		 * Show modal
		 * @param {string} data
		 * @param {object} container
		 * @param {object} paramsObject
		 * @param {function} cb
		 * @param {string} url
		 * @param {function} sendByAjaxCb
		 */showModalData:function showModalData(data,container,paramsObject,cb,url,sendByAjaxCb){var thisInstance=this,params={show:!0};1!==$('#backgroundClosingModal').val()&&(params.backdrop=!0),'object'===('undefined'==typeof paramsObject?'undefined':_typeof(paramsObject))&&(container.css(paramsObject),params=$.extend(params,paramsObject)),container.html(data),container.find('.modal').hasClass('static')&&(params.backdrop='static'),$.fn.modal.Constructor.prototype.enforceFocus=function(){$(document).off('focusin.bs.modal')// guard against infinite focus loop
.on('focusin.bs.modal',$.proxy(function(e){if($(e.target).hasClass('select2-search__field'))return !0},this));};var modalContainer=container.find('.modal:first');modalContainer.one('shown.bs.modal',function(){var backdrop=jQuery('.modal-backdrop');1<backdrop.length&&jQuery('.modal-backdrop:not(:first)').remove(),cb(modalContainer);}),$('body').append(container),modalContainer.modal(params),thisInstance.registerModalEvents(modalContainer,sendByAjaxCb),thisInstance.registerDataTables(modalContainer.find('.dataTable'));},/**
		 * Register modal events.
		 * @param {object} container
		 * @param {function} sendByAjaxCb
		 */registerModalEvents:function registerModalEvents(container,sendByAjaxCb){var form=container.find('form'),validationForm=!1;form.hasClass('validateForm')&&(form.validationEngine(app.validationEngineOptions),validationForm=!0),form.hasClass('sendByAjax')&&form.on('submit',function(e){var save=!0;if(e.preventDefault(),validationForm&&0<form.data('jqv').InvalidFields.length&&(app.formAlignmentAfterValidation(form),save=!1),save){var progressIndicatorElement=$.progressIndicator({blockInfo:{enabled:!0}}),formData=form.serializeFormData();AppConnector.request(formData).done(function(responseData){return sendByAjaxCb(formData,responseData),responseData.success&&responseData.result&&(responseData.result.notify&&Vtiger_Helper_Js.showMessage(responseData.result.notify),responseData.result.procesStop)?(progressIndicatorElement.progressIndicator({mode:'hide'}),!1):void(app.hideModalWindow(),progressIndicatorElement.progressIndicator({mode:'hide'}))}).fail(function(){progressIndicatorElement.progressIndicator({mode:'hide'});});}});},/**
		 * Show modal window.
		 * @param {object} data
		 * @param {string} url
		 * @param {function} cb
		 * @param {object} paramsObject
		 *
		 * @return {object}
		 */showModalWindow:function showModalWindow(data,url,cb,paramsObject){if(window.parent!==window)return this.childFrame=!0,void window.parent.app.showModalWindow(data,url,cb,paramsObject);var thisInstance=this;//null is also an object
if(Window.lastModalId='modal_'+Math.random().toString(36).substr(2,9),'object'===('undefined'==typeof data?'undefined':_typeof(data))&&null!=data&&!(data instanceof $)){if(null!=data.id&&(Window.lastModalId=data.id),paramsObject=data.css,cb=data.cb,url=data.url,'undefined'!==data.sendByAjaxCb)var sendByAjaxCb=data.sendByAjaxCb;data=data.data;}if('function'==typeof url?('object'===('undefined'==typeof cb?'undefined':_typeof(cb))&&(paramsObject=cb),cb=url,url=!1):'object'===('undefined'==typeof url?'undefined':_typeof(url))&&(cb=function(){},paramsObject=url,url=!1),'function'!=typeof cb&&(cb=function(){}),'function'!=typeof sendByAjaxCb)var sendByAjaxCb=function(){};void 0!==paramsObject&&void 0!==paramsObject.modalId&&(Window.lastModalId=paramsObject.modalId);// prevent duplicate hash generation
var container=$('#'+Window.lastModalId);return container.length&&container.remove(),container=$('<div></div>'),container.attr('id',Window.lastModalId).addClass('modalContainer js-modal-container'),container.one('hidden.bs.modal',function(){container.remove();var backdrop=$('.modal-backdrop'),modalContainers=$('.modalContainer');0==modalContainers.length&&backdrop.length&&backdrop.remove(),0<backdrop.length&&$('body').addClass('modal-open');}),data?thisInstance.showModalData(data,container,paramsObject,cb,url,sendByAjaxCb):$.get(url).done(function(response){thisInstance.showModalData(response,container,paramsObject,cb,url,sendByAjaxCb);}),container},hideModalWindow:function hideModalWindow(callback,id){id==null&&(id='globalmodal');var container=jQuery('#'+id);if(!(0>=container.length)){'function'!=typeof callback&&(callback=function(){});var modalContainer=container.find('.modal');modalContainer.modal('hide');var backdrop=jQuery('.modal-backdrop:last'),modalContainers=jQuery('.modalContainer');0==modalContainers.length&&backdrop.length&&backdrop.remove(),modalContainer.one('hidden.bs.modal',callback);}},registerAdditions:function registerAdditions($){$.fn.serializeFormData=function(){var form=$(this),values=form.serializeArray(),data={};values&&$(values).each(function(k,v){if(v.name in data&&'object'!=_typeof(data[v.name])){var element=form.find('[name="'+v.name+'"]');//Only for muti select element we need to send array of values
if(element.is('select')&&null!=element.attr('multiple')){var prevValue=data[v.name];data[v.name]=new Array,data[v.name].push(prevValue);}}'object'==_typeof(data[v.name])?data[v.name].push(v.value):data[v.name]=v.value;});// If data-type="autocomplete", pickup data-value="..." set
var autocompletes=$('[data-type="autocomplete"]',$(this));return $(autocompletes).each(function(i){var ac=$(autocompletes[i]);data[ac.attr('name')]=ac.data('value');}),data};},/**
		 * Function to push down the error message size when validation is invoked
		 * @params : form Element
		 */formAlignmentAfterValidation:function formAlignmentAfterValidation(form){// to avoid hiding of error message under the fixed nav bar
var formError=form.find('.formError:not(\'.greenPopup\'):first');if(0<formError.length){var destination=formError.offset().top;jQuery('html').animate({scrollTop:destination-105},'slow');}},getRecordList:function getRecordList(params,callback){app.showModalWindow(null,params,function(){app.event.one('AfterSelectedRecordList',function(event,item){callback(item);});});},/**
		 * Open url in top window
		 * @param string url
		 */openUrl:function openUrl(url){window.location===window.top.location?window.location.href=url:window.top.location.href=url;},openUrlMethodPost:function openUrlMethodPost(url,postData){var formHtml='<form action="'+url+'" method="post">';$.each(postData,function(index,value){formHtml+='<input type="text" name="'+index+'" value="'+value+'" />';}),formHtml+='</form>';var form=$(formHtml);$('body').append(form),form.submit();},registerMobileMenu:function registerMobileMenu(container){$('.js-sidebar-btn').on('click',function(){var mobileMenu=container.find('.js-mobile-page'),mobileMenuContent=container.find('.js-mobile-body');mobileMenu.hasClass('c-menu-mobile')?(mobileMenu.removeClass('c-menu-mobile'),mobileMenuContent.removeClass('c-menu-mobile__content')):(mobileMenu.addClass('c-menu-mobile'),mobileMenuContent.addClass('c-menu-mobile__content'));});},errorLog:function errorLog(error,err,errorThrown){console.warn('%cYetiForce debug mode!!!','color: red; font-family: sans-serif; font-size: 1.5em; font-weight: bolder; text-shadow: #000 1px 1px;'),'object'===('undefined'==typeof error?'undefined':_typeof(error))&&error.responseText&&(error=error.responseText),'object'===('undefined'==typeof error?'undefined':_typeof(error))&&error.statusText&&(error=error.statusText),error&&console.error(error),err&&'error'!==err&&console.error(err),errorThrown&&console.error(errorThrown);},registerModalController:function registerModalController(modalId,modalContainer,cb){var windowParent=this.childFrame?window.parent:window;modalId||(modalId=Window.lastModalId),modalContainer||(modalContainer=$('#'+modalId+' .js-modal-data'));var moduleName=modalContainer.data('module')||'Base',modalClass=moduleName.replace(':','_')+'_'+modalContainer.data('view')+'_JS';if('undefined'==typeof windowParent[modalClass]&&(modalClass='Base_'+modalContainer.data('view')+'_JS'),'undefined'!=typeof windowParent[modalClass]){var instance=new windowParent[modalClass];'function'==typeof cb&&cb(modalContainer,instance),instance.registerEvents(modalContainer);}},registerSubMenu:function registerSubMenu(){$('.js-submenu-toggler').on('click',function(e){$(e.currentTarget).hasClass('collapsed')||$(e.target).closest('.toggler').length||(window.location=$(e.currentTarget).attr('href'));});},showNotify:function showNotify(customParams){var params={hide:!1},userParams=customParams,type='info';return 'string'==typeof customParams&&(userParams={title:customParams}),'undefined'!=typeof customParams.type&&(type=customParams.type),'error'!==type&&(params.hide=!0),PNotify[type]($.extend(params,userParams))},/**
		 * Set Pnotify defaults options
		 */setPnotifyDefaultOptions:function setPnotifyDefaultOptions(){// *Trusted option enables html as parameter's value
//PNotify.defaults.labels.close = app.vtranslate('JS_CLOSE');
PNotify.defaults.textTrusted=!0,PNotify.defaults.titleTrusted=!0,PNotify.defaults.sticker=!1,PNotify.defaults.styling='bootstrap4',PNotify.defaults.icons='fontawesome5',PNotify.defaults.delay=3e3,PNotify.defaults.stack.maxOpen=10,PNotify.defaults.stack.spacing1=5,PNotify.defaults.stack.spacing2=5,PNotify.defaultModules.set(PNotifyBootstrap4,{}),PNotify.defaultModules.set(PNotifyFontAwesome5,{}),PNotify.defaultModules.set(PNotifyMobile,{});},registerIframeAndMoreContent:function registerIframeAndMoreContent(){var showMoreModal=function(e){e.preventDefault(),e.stopPropagation();var btn=$(e.currentTarget),message=btn.data('iframe')?btn.siblings('iframe').clone().show():btn.closest('.js-more-content').find('.fullContent').html();bootbox.dialog({message:message,title:'<span class="mdi mdi-overscan"></span>  '+app.translate('JS_FULL_TEXT'),className:'u-word-break modal-fullscreen',buttons:{danger:{label:'<span class="fas fa-times mr-1"></span>'+app.translate('JS_CLOSE'),className:'btn-danger',callback:function callback(){}}}});};$('.js-more').on('click',showMoreModal),$(document).on('click','.js-more',showMoreModal);}};$(function(){var container=jQuery('body');app.registerSelectField(container),app.setPnotifyDefaultOptions(),app.registerTimeField(container),app.registerAdditions(jQuery),app.registerSubMenu(),app.registerModal(container),app.registerMobileMenu(container),app.registerIframeAndMoreContent(),app.registerEventForEditor(container);//	app.registerSideLoading(container);
// Instantiate Page Controller
var pageController=app.getPageController();pageController&&pageController.registerEvents();});
//# sourceMappingURL=app.min.js.map
