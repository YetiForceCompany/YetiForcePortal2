var app={languageString:[],cacheParams:[],getModuleName:function(){return app.getMainParams("module")},getViewName:function(){return app.getMainParams("view")},getPageController:function(){var c=app.getModuleName();var a=app.getViewName();var d=c+"_"+a+"_Js";var b=jQuery("#extendModules").val();if(typeof window[d]=="undefined"&&b!=undefined){d=b+"_"+a+"_Js"}if(typeof window[d]=="undefined"){d="Base_"+a+"_Js"}if(typeof window[d]!="undefined"){return new window[d]()}},validationEngineOptions:{scroll:false,promptPosition:"topLeft",prettySelect:true,useSuffix:"_chosen",usePrefix:"s2id_",},formatDate:function(b){var j=b.getFullYear(),a=b.getMonth()+1,g=b.getDate(),f=b.getHours(),c=b.getMinutes(),e=b.getSeconds();return j+"-"+this.formatDateZ(a)+"-"+this.formatDateZ(g)+" "+this.formatDateZ(f)+":"+this.formatDateZ(c)+":"+this.formatDateZ(e)},formatDateZ:function(a){return(a<=9?"0"+a:a)},howManyDaysFromDate:function(c){var d=c.getTime();var a=new Date();var b=new Date(a.getFullYear(),a.getMonth(),a.getDate()).getTime();return Math.floor(((b-d)/(1000*60*60*24)))+1},parseFieldInfo:function(a){return JSON.parse(a)},parseNumberToFloat:function(c){var a=app.getMainParams("currencyGroupingSeparator");var b=app.getMainParams("currencyDecimalSeparator");if(c===undefined||c===""){c=0}c=c.toString();c=c.split(a).join("");c=c.replace(/\s/g,"").replace(b,".");return parseFloat(c)},registerSelectField:function(a){this.registerChznSelectField(a);this.registerSelect2Field(a)},registerTimeField:function(b){var c=this;if(typeof b==="undefined"){b=jQuery("body")}if(typeof params==="undefined"){params={}}var a=jQuery(".timeField",b);params.autoclose=true;a.each(function(){var g=$(this);var d=g.find(".timeFieldInput");var f=g.find(".timeFieldButton");if(!d.attr("id")){d.attr("id","timeFieldInput"+c.generateRandomChar()+c.generateRandomChar()+c.generateRandomChar())}var h=params;var e=app.parseFieldInfo(d.attr("data-fieldinfo"));if(e["time-format"]==12){h.twelvehour=true}else{if(e["time-format"]==24){h.twelvehour=false}}d.clockpicker(h);f.click(function(i){i.stopPropagation();d.clockpicker("toggle")})})},registerDateField:function(a){var c=this;if(typeof a==="undefined"){a=jQuery("body")}if(typeof params==="undefined"){params={}}var b=jQuery(".dateField",a);params.width="100%";params.singleDatePicker=true;params.showDropdowns=true;params.linkedCalendars=false;params.autoApply=true;params.autoUpdateInput=false;params.locale={};params.locale.format="YYYY-MM-DD";params.locale.daysOfWeek=[app.translate("JS_DATE_WEEK_DAY_SHORT_SUNDAY"),app.translate("JS_DATE_WEEK_DAY_SHORT_MONDAY"),app.translate("JS_DATE_WEEK_DAY_SHORT_TUESDAY"),app.translate("JS_DATE_WEEK_DAY_SHORT_WEDNESDAY"),app.translate("JS_DATE_WEEK_DAY_SHORT_THURSDAY"),app.translate("JS_DATE_WEEK_DAY_SHORT_FRIDAY"),app.translate("JS_DATE_WEEK_DAY_SHORT_SATURDAY")];params.locale.monthNames=[app.translate("JS_DATE_MONTH_JANUARY"),app.translate("JS_DATE_MONTH_FEBRUARY"),app.translate("JS_DATE_MONTH_MARCH"),app.translate("JS_DATE_MONTH_APRIL"),app.translate("JS_DATE_MONTH_MAY"),app.translate("JS_DATE_MONTH_JUNE"),app.translate("JS_DATE_MONTH_JULY"),app.translate("JS_DATE_MONTH_AUGUST"),app.translate("JS_DATE_MONTH_SEPTEMBER"),app.translate("JS_DATE_MONTH_OCTOBER"),app.translate("JS_DATE_MONTH_NOVEMBER"),app.translate("JS_DATE_MONTH_DECEMBER")];b.each(function(){var g=$(this);var d=g.find(".dateFieldInput");var f=g.find(".dateFieldButton");if(!d.attr("id")){d.attr("id","dateFieldInput"+c.generateRandomChar()+c.generateRandomChar()+c.generateRandomChar())}var h=params;var e=app.parseFieldInfo(d.attr("data-fieldinfo"));if(e["date-format-js2"]){h.locale.format=e["date-format-js2"]}if(e["day-of-the-week-int"]){h.locale.firstDay=e["day-of-the-week-int"]}d.daterangepicker(h);f.click(function(){d.focus()});d.on("apply.daterangepicker",function(j,i){$(this).val(i.startDate.format(h.locale.format))})})},registerChznSelectField:function(d,a,g){var e=this;if(typeof d=="undefined"){d=jQuery("body")}if(typeof g=="undefined"){g={}}var c=jQuery(".chzn-select",d);c.each(function(){if($(this).prop("id").length==0){$(this).attr("id","sel"+e.generateRandomChar()+e.generateRandomChar()+e.generateRandomChar())}});c.filter("[multiple]").filter('[data-validation-engine*="validate"]').on("change",function(h){jQuery(h.currentTarget).trigger("focusout")});var g={no_results_text:app.translate("JS_NO_RESULTS_FOUND")+":"};var b=app.getModuleName();if(c.filter("[multiple]")){g.placeholder_text_multiple=" "+app.translate("JS_SELECT_SOME_OPTIONS")}g.placeholder_text_single=" "+app.translate("JS_SELECT_AN_OPTION");c.chosen(g);c.each(function(){var h=$(this);if(h.hasClass("hideSelected")){var i=[];h.find("optgroup,option").each(function(k,j){if(jQuery(this).hasClass("hide")){i.push(k)}});if(i.length){h.next().find(".search-choice-close").each(function(m,l){var k=jQuery(this);var j=k.data("option-array-index");if(jQuery.inArray(j,i)!=-1){k.closest("li").remove()}})}}if(h.attr("readonly")=="readonly"){h.on("chosen:updated",function(){if(h.attr("readonly")){var k=h.is(":disabled");var j=h.data("chosen");h.attr("disabled","disabled");if(typeof j=="object"){j.search_field_disabled()}if(k){h.attr("disabled","disabled")}else{h.removeAttr("disabled")}}});h.trigger("chosen:updated")}});var f=jQuery(".chosen-container-multi .default").css("width","100%");return f},registerSelect2Field:function(b,d){var c=this;if(typeof b=="undefined"){b=jQuery("body")}if(typeof d=="undefined"){d={}}var a=jQuery(".select2",b);d.language={};d.width="100%";a.each(function(){if($(this).prop("id").length==0){$(this).attr("id","sel"+c.generateRandomChar()+c.generateRandomChar()+c.generateRandomChar())}$(this).select2(d)})},getUrlParam:function(a){var d=decodeURIComponent(window.location.search.substring(1)),c=d.split("&"),e,b;for(b=0;b<c.length;b++){e=c[b].split("=");if(e[0]===a){return e[1]===undefined?true:e[1]}}},generateRandomChar:function(){var c,b,a;c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ";a=Math.floor(Math.random()*c.length);return b=c.substring(a,a+1)},registerSideLoading:function(a){$(document).pjax("a[href]:not(.loadPage)","div.bodyContent");$(document).on("pjax:complete",function(){var b=app.getPageController();if(b){b.registerEvents()}})},translate:function(b){if(app.languageString[b]!=undefined){return app.languageString[b]}else{var a=jQuery("#js_strings").text();if(a!=""){app.languageString=JSON.parse(a);if(b in app.languageString){return app.languageString[b]}}}return b},registerDataTables:function(a,b){if($.fn.dataTable==undefined){return false}if(a.length==0){return false}var c={language:{sLengthMenu:app.translate("JS_S_LENGTH_MENU"),sZeroRecords:app.translate("JS_NO_RESULTS_FOUND"),sInfo:app.translate("JS_S_INFO"),sInfoEmpty:app.translate("JS_S_INFO_EMPTY"),sSearch:app.translate("JS_SEARCH"),sEmptyTable:app.translate("JS_NO_RESULTS_FOUND"),sInfoFiltered:app.translate("JS_S_INFO_FILTERED"),sLoadingRecords:app.translate("JS_LOADING_OF_RECORDS"),sProcessing:app.translate("JS_LOADING_OF_RECORDS"),oPaginate:{sFirst:app.translate("JS_S_FIRST"),sPrevious:app.translate("JS_S_PREVIOUS"),sNext:app.translate("JS_S_NEXT"),sLast:app.translate("JS_S_LAST")},oAria:{sSortAscending:app.translate("JS_S_SORT_ASCENDING"),sSortDescending:app.translate("JS_S_SORT_DESCENDING")}}};if(b!=undefined){c=jQuery.extend(c,b)}$.extend($.fn.dataTable.defaults,c);return a.DataTable()},getMainParams:function(c,a){if(app.cacheParams[c]==undefined){var b=$("#"+c).val();app.cacheParams[c]=b}var b=app.cacheParams[c];if(a){if(b!=""){b=$.parseJSON(b)}else{b=[]}}return b},setMainParams:function(b,a){app.cacheParams[b]=a;$("#"+b).val(a)},showModalWindow:function(e,a,d,i){var h=this;var c="globalmodal";if(typeof e=="object"&&e!=null&&!(e instanceof jQuery)){if(e.id!=undefined){c=e.id}i=e.css;d=e.cb;a=e.url;if(e.sendByAjaxCb!="undefined"){var f=e.sendByAjaxCb}e=e.data}if(typeof a=="function"){if(typeof d=="object"){i=d}d=a;a=false}else{if(typeof a=="object"){d=function(){};i=a;a=false}}if(typeof d!="function"){d=function(){}}if(typeof f!="function"){var f=function(){}}var b=jQuery("#"+c);if(b.length){b.remove()}b=jQuery("<div></div>");b.attr("id",c).addClass("modalContainer");var g=function(k){var l={show:true,};if(jQuery("#backgroundClosingModal").val()!=1){l.backdrop="static"}if(typeof i=="object"){b.css(i);l=jQuery.extend(l,i)}b.html(k);$.fn.modal.Constructor.prototype.enforceFocus=function(m){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(n){if($(n.target).hasClass("select2-search__field")){return true}},this))};var j=b.find(".modal:first");j.modal(l);jQuery("body").append(b);app.showChznSelectElement(j.find("select.chzn-select"));app.showSelect2Element(j.find("select.select2"));h.registerDataTables(j.find(".dataTable"));j.one("shown.bs.modal",function(){var m=jQuery(".modal-backdrop");if(m.length>1){jQuery(".modal-backdrop:not(:first)").remove()}d(j)})};if(e){g(e)}else{jQuery.get(a).then(function(j){g(j)})}b.one("hidden.bs.modal",function(){b.remove();var k=jQuery(".modal-backdrop");var j=jQuery(".modalContainer");if(j.length==0&&k.length){k.remove()}if(k.length>0){$("body").addClass("modal-open")}});return b},hideModalWindow:function(f,e){if(e==undefined){e="globalmodal"}var c=jQuery("#"+e);if(c.length<=0){return}if(typeof f!="function"){f=function(){}}var b=c.find(".modal");b.modal("hide");var d=jQuery(".modal-backdrop:last");var a=jQuery(".modalContainer");if(a.length==0&&d.length){d.remove()}b.one("hidden.bs.modal",f)},registerAdditions:function(a){a.fn.serializeFormData=function(){var d=a(this);var b=d.serializeArray();var e={};if(b){a(b).each(function(g,f){if(f.name in e&&(typeof e[f.name]!="object")){var h=d.find('[name="'+f.name+'"]');if(h.is("select")&&h.attr("multiple")!=undefined){var i=e[f.name];e[f.name]=new Array();e[f.name].push(i)}}if(typeof e[f.name]=="object"){e[f.name].push(f.value)}else{e[f.name]=f.value}})}var c=a('[data-type="autocomplete"]',a(this));a(c).each(function(f){var g=a(c[f]);e[g.attr("name")]=g.data("value")});return e}},formAlignmentAfterValidation:function(d){var c=d.find(".formError:not('.greenPopup'):first");if(c.length>0){var a=c.offset().top;var b=a-105;jQuery("html").animate({scrollTop:b},"slow")}},};jQuery(document).ready(function(){var a=jQuery("body");app.registerSelectField(a);app.registerDateField(a);app.registerTimeField(a);app.registerAdditions(jQuery);var b=app.getPageController();if(b){b.registerEvents()}});