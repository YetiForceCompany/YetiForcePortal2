'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
  return typeof obj;
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

var toConsumableArray = function (arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];

    return arr2;
  } else {
    return Array.from(arr);
  }
};

/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */var App={Components:{QuickCreate:{/**
			 * module quick create data cache
			 */moduleCache:{},/**
			 * Register function
			 */register:function register(){$('body').on('click','.js-quick-create',function(e){var element=$(e.currentTarget);if(element.data('moduleName')&&App.Components.QuickCreate.createRecord(element.data('moduleName')),element.data('url')){var url=element.data('url'),progress=$.progressIndicator({blockInfo:{enabled:!0}});App.Components.QuickCreate.getForm(url).done(function(data){progress.progressIndicator({mode:'hide'}),App.Components.QuickCreate.showModal(data);});}});},/**
			 * Create record
			 *
			 * @param   {string}  moduleName
			 * @param   {object}  params
			 */createRecord:function createRecord(moduleName){var _this=this,params=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},url='index.php?module='+moduleName+'&view=QuickCreateModal';('DetailView'===app.getViewName()||'EditView'===app.getViewName()&&app.getRecordId())&&(url+='&sourceModule='+app.getModuleName(),url+='&sourceRecord='+app.getRecordId());var progress=$.progressIndicator({blockInfo:{enabled:!0}});this.getForm(url,params).done(function(data){progress.progressIndicator({mode:'hide'}),_this.showModal(data,params);});},/**
			 * Get quick create form
			 *
			 * @param   {string}  url
			 * @param   {object}  params
			 *
			 * @return  {Promise} aDeferred
			 */getForm:function getForm(url){var params=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},aDeferred=$.Deferred(),data={};return 'undefined'!=typeof params.data&&(data=params.data),AppConnector.request({type:'POST',url:url,data:data}).done(function(data){aDeferred.resolve(data);}).fail(function(textStatus,errorThrown,jqXHR){aDeferred.reject(textStatus,errorThrown,jqXHR);}),aDeferred.promise()},/**
			 * Show modal
			 *
			 * @param   {string}  html
			 * @param   {object}  params
			 */showModal:function showModal(html){var params=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},callbackAfterShownModal=params.callbackAfterShownModal||function(){};app.showModalWindow(html,function(container,modalInstance){var callbackAfterSave=params.callbackAfterSave||function(){};params.callbackAfterSave=function(response){callbackAfterSave(response),app.hideModalWindow('',container.data('modalId'));},modalInstance.editView.registerSubmit(params),callbackAfterShownModal(container),callbackAfterShownModal(container),container.on('click','.js-edit-back',function(){app.hideModalWindow('',container.data('modalId'));});});}}}},app={/**
	 * Events in application
	 */event:new function(){this.el=$({}),this.trigger=function(){this.el.trigger(arguments[0],Array.prototype.slice.call(arguments,1));},this.on=function(){this.el.on.apply(this.el,arguments);},this.one=function(){this.el.one.apply(this.el,arguments);},this.off=function(){this.el.off.apply(this.el,arguments);};},languageString:[],cacheParams:[],modalInstances:[],modalParams:[],/**
	 * Function to get the module name. This function will get the value from element which has id module
	 * @return : string - module name
	 */getModuleName:function getModuleName(){return app.getMainParams('module')},/**
	 * Function to get the module name. This function will get the value from element which has id module
	 * @return : string - module name
	 */getParentModuleName:function getParentModuleName(){return this.getMainParams('parent')},/**
	 * Function returns the current view name
	 */getViewName:function getViewName(){return app.getMainParams('view')},/**
	 * Function returns the record id
	 */getRecordId:function getRecordId(){var recordId;return -1!==$.inArray(this.getViewName(),['EditView','DetailView'])&&(recordId=this.getMainParams('recordId')),recordId},/**
	 * Function returns the javascript controller based on the current view
	 */getPageController:function getPageController(){var moduleName=app.getModuleName(),view=app.getViewName(),moduleClassName=moduleName+'_'+view+'_Js',extendModules=jQuery('#extendModules').val();if('undefined'==typeof window[moduleClassName]&&null!=extendModules&&(moduleClassName=extendModules+'_'+view+'_Js'),'undefined'==typeof window[moduleClassName]&&(moduleClassName='Base_'+view+'_Js'),'undefined'!=typeof window[moduleClassName])return new window[moduleClassName]},validationEngineOptions:{// Avoid scroll decision and let it scroll up page when form is too big
// Reference: http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/
scroll:!1,promptPosition:'topLeft',//to support validation for chosen select box
prettySelect:!0,useSuffix:'_chosen',usePrefix:'s2id_'},/**
	 * Default scroll options
	 */scrollOptions:{wheelSpeed:.1},formatDate:function formatDate(date){var y=date.getFullYear(),m=date.getMonth()+1,d=date.getDate(),h=date.getHours(),i=date.getMinutes(),s=date.getSeconds();return y+'-'+this.formatDateZ(m)+'-'+this.formatDateZ(d)+' '+this.formatDateZ(h)+':'+this.formatDateZ(i)+':'+this.formatDateZ(s)},formatDateZ:function formatDateZ(i){return 9>=i?'0'+i:i},howManyDaysFromDate:function howManyDaysFromDate(time){var fromTime=time.getTime(),today=new Date,toTime=new Date(today.getFullYear(),today.getMonth(),today.getDate()).getTime();return Math.floor((toTime-fromTime)/86400000)+1},parseFieldInfo:function parseFieldInfo(fieldInfo){return JSON.parse(fieldInfo)},parseNumberToFloat:function parseNumberToFloat(val){var groupSeparator=app.getMainParams('currencyGroupingSeparator'),decimalSeparator=app.getMainParams('currencyDecimalSeparator');return (void 0===val||''===val)&&(val=0),val=val.toString(),val=val.split(groupSeparator).join(''),val=val.replace(/\s/g,'').replace(decimalSeparator,'.'),parseFloat(val)},registerSelectField:function registerSelectField(container){this.registerChznSelectField(container),App.Fields.Picklist.changeSelectElementView(container);},/**
	 * Register event for clock picker.
	 * @param {object} timeInputs
	 */registerEventForClockPicker:function registerEventForClockPicker(){var timeInputs=0<arguments.length&&void 0!==arguments[0]?arguments[0]:$('.clockPicker');if(timeInputs.hasClass('clockPicker')||(timeInputs=timeInputs.find('.clockPicker')),!!timeInputs.length){var params={placement:'bottom',autoclose:!0,minutestep:5};$('.js-clock__btn').on('click',function(e){e.stopPropagation();var tempElement=$(e.currentTarget).closest('.time').find('input.clockPicker');'disabled'!==tempElement.attr('disabled')&&'readonly'!==tempElement.attr('readonly')&&tempElement.clockpicker('show');});var formatTimeString=function(timeInput){if(params.twelvehour){var meridiemTime='';params.afterDone=function(){//format time string after picking a value
var timeString=timeInput.val(),timeStringFormatted=timeString.slice(0,timeString.length-2)+' '+meridiemTime;timeInput.val(timeStringFormatted),app.event.trigger('Clockpicker.changed',timeInput);},params.beforeHide=function(){meridiemTime=$('.clockpicker-buttons-am-pm:visible').find('a:not(.text-white-50)').text();};}else params.afterDone=function(){app.event.trigger('Clockpicker.changed',timeInput);};};timeInputs.each(function(i,e){var timeInput=$(e),formatTime=timeInputs.data('format')||app.getMainParams('hourFormat');params.twelvehour=12===parseInt(formatTime),formatTimeString(timeInput),timeInput.clockpicker(params);});}},registerChznSelectField:function registerChznSelectField(parent,view,params){var thisInstance=this;'undefined'==typeof parent&&(parent=jQuery('body')),'undefined'==typeof params&&(params={});var selectElement=jQuery('.chzn-select',parent);selectElement.each(function(){0==$(this).prop('id').length&&$(this).attr('id','sel'+thisInstance.generateRandomChar()+thisInstance.generateRandomChar()+thisInstance.generateRandomChar());}),selectElement.filter('[multiple]').filter('[data-validation-engine*="validate"]').on('change',function(e){jQuery(e.currentTarget).trigger('focusout');});var params={no_results_text:app.translate('JS_NO_RESULTS_FOUND')+':'},moduleName=app.getModuleName();selectElement.filter('[multiple]')&&(params.placeholder_text_multiple=' '+app.translate('JS_SELECT_SOME_OPTIONS')),params.placeholder_text_single=' '+app.translate('JS_SELECT_AN_OPTION'),selectElement.chosen(params),selectElement.each(function(){var select=$(this);// hide selected items in the chosen instance when item is hidden.
if(select.hasClass('hideSelected')){var ns=[];select.find('optgroup,option').each(function(n){jQuery(this).hasClass('d-none')&&ns.push(n);}),ns.length&&select.next().find('.search-choice-close').each(function(){var element=jQuery(this),index=element.data('option-array-index');-1!=jQuery.inArray(index,ns)&&element.closest('li').remove();});}'readonly'==select.attr('readonly')&&(select.on('chosen:updated',function(){if(select.attr('readonly')){var wasDisabled=select.is(':disabled'),selectData=select.data('chosen');select.attr('disabled','disabled'),'object'==('undefined'==typeof selectData?'undefined':_typeof(selectData))&&selectData.search_field_disabled(),wasDisabled?select.attr('disabled','disabled'):select.removeAttr('disabled');}}),select.trigger('chosen:updated'));});// Improve the display of default text (placeholder)
var chosenSelectConainer=jQuery('.chosen-container-multi .default').css('width','100%');return chosenSelectConainer},registerSelect2Field:function registerSelect2Field(parent,params){var thisInstance=this;'undefined'==typeof parent&&(parent=jQuery('body')),'undefined'==typeof params&&(params={});var selectElement=jQuery('.select2',parent);//params.theme = "bootstrap";
params.language={},params.width='100%',selectElement.each(function(){0==$(this).prop('id').length&&$(this).attr('id','sel'+thisInstance.generateRandomChar()+thisInstance.generateRandomChar()+thisInstance.generateRandomChar()),$(this).select2(params);});},getUrlParam:function getUrlParam(name){var sParameterName,i,sPageURL=decodeURIComponent(window.location.search.substring(1)),sURLVariables=sPageURL.split('&');for(i=0;i<sURLVariables.length;i++)if(sParameterName=sURLVariables[i].split('='),sParameterName[0]===name)return void 0===sParameterName[1]||sParameterName[1]},generateRandomChar:function generateRandomChar(){var chars,newchar,rand;return chars='0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ',rand=Math.floor(Math.random()*chars.length),newchar=chars.substring(rand,rand+1)},translate:function translate(key){if(app.languageString[key]!=null)return app.languageString[key];var strings=jQuery('#js_strings').text();return ''!=strings&&(app.languageString=JSON.parse(strings),key in app.languageString)?app.languageString[key]:key},registerDataTables:function registerDataTables(table){var options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return null!=$.fn.dataTable&&0!=table.length&&($.fn.dataTable.ext.errMode=function(settings,helpPage,message){settings.jqXHR.statusText&&settings.jqXHR.responseJSON.error.message?(alert(settings.jqXHR.statusText+'\r\n'+settings.jqXHR.responseJSON.error.message),console.error(settings.jqXHR.responseJSON.error)):message?alert(message):console.error(settings.jqXHR.responseJSON);},$.extend($.fn.dataTable.defaults,{fixedHeader:!0,dom:'<"float-left"B><"float-right"f>rt<"row"<"col-sm-4"l><"col-sm-4"i><"col-sm-4"p>>',language:{sLengthMenu:app.translate('JS_S_LENGTH_MENU'),sZeroRecords:app.translate('JS_NO_RESULTS_FOUND'),sInfo:app.translate('JS_S_INFO'),sInfoEmpty:app.translate('JS_S_INFO_EMPTY'),sSearch:app.translate('JS_SEARCH'),sEmptyTable:app.translate('JS_NO_RESULTS_FOUND'),sInfoFiltered:app.translate('JS_S_INFO_FILTERED'),sLoadingRecords:app.translate('JS_LOADING_OF_RECORDS'),sProcessing:app.translate('JS_LOADING_OF_RECORDS'),oPaginate:{sFirst:app.translate('JS_S_FIRST'),sPrevious:app.translate('JS_S_PREVIOUS'),sNext:app.translate('JS_S_NEXT'),sLast:app.translate('JS_S_LAST')},oAria:{sSortAscending:app.translate('JS_S_SORT_ASCENDING'),sSortDescending:app.translate('JS_S_SORT_DESCENDING')}}}),table.DataTable(options))},/**
	 * Function to register event for ckeditor for description field
	 *
	 * @param {object} container
	 */registerBaseEvent:function registerBaseEvent(container){container.on('click','.js-history-back',function(){window.history.back();});},getMainParams:function getMainParams(param,json){if(null==app.cacheParams[param]){var value=$('#'+param).val();app.cacheParams[param]=value;}var value=app.cacheParams[param];return json&&(''==value?value=[]:value=$.parseJSON(value)),value},setMainParams:function setMainParams(param,value){app.cacheParams[param]=value,$('#'+param).val(value);},/**
	 * Hide popover.
	 * @param {object} element
	 */hidePopover:function hidePopover(element){'undefined'==typeof element&&(element=$('body .js-popover-tooltip')),element.popover('hide');},/**
	 * Hide popovers after click.
	 * @param {object} popoverParent
	 */hidePopoversAfterClick:function hidePopoversAfterClick(popoverParent){popoverParent.on('mousedown',function(){setTimeout(function(){popoverParent.popover('hide');},100);});},/**
	 * Register popover manual trigger.
	 * @param {object} element
	 * @param {integer} element
	 */registerPopoverManualTrigger:function registerPopoverManualTrigger(element,manualTriggerDelay){var _this2=this;element.on('mouseleave',function(){setTimeout(function(){var currentPopover=_this2.getBindedPopover(element);$(':hover').filter(currentPopover).length||currentPopover.find('.js-popover-tooltip--record[aria-describedby]').length||currentPopover.popover('hide');},500);}),element.on('mouseenter',function(){setTimeout(function(){if(element.is(':hover')){element.popover('show');var currentPopover=_this2.getBindedPopover(element);currentPopover.on('mouseleave',function(){setTimeout(function(){$(':hover').filter(currentPopover).length||currentPopover.find('.js-popover-tooltip--record[aria-describedby]').length||currentPopover.popover('hide'),$(':hover').filter($('.popover')).length||$('.popover').popover('hide');},500);});}},manualTriggerDelay);}),app.hidePopoversAfterClick(element);},/**
	 * Register popover.
	 * @param {object} container
	 */registerPopover:function registerPopover(){var container=0<arguments.length&&arguments[0]!==void 0?arguments[0]:$(document);window.popoverCache={},container.on('mousemove',function(e){app.mousePosition={x:e.pageX,y:e.pageY};}),container.on('mouseenter','.js-popover-tooltip, .js-popover-tooltip--record, .js-popover-tooltip--ellipsis, [data-field-type="reference"], [data-field-type="multireference"]',function(e){var currentTarget=$(e.currentTarget);!currentTarget.find('.js-popover-tooltip--record').length&&(currentTarget.hasClass('popover-triggered')||currentTarget.hasClass('js-popover-tooltip--record')||currentTarget.find('.js-popover-tooltip--record').length||currentTarget.data('field-type')||(app.showPopoverElementView(currentTarget),currentTarget.trigger('mouseenter')));});},/**
	 * Show popover element view.
	 * @param {jQuery} element
	 * @param {object} params
	 * @param {HTMLElement}
	 */showPopoverElementView:function showPopoverElementView(){var selectElement=0<arguments.length&&void 0!==arguments[0]?arguments[0]:$('.js-popover-tooltip'),params=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},defaultParams={trigger:'manual',manualTriggerDelay:500,placement:'auto',html:!0,template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',container:'body',boundary:'viewport',delay:{show:300,hide:100}};return selectElement.each(function(index,domElement){var element=$(domElement),elementParams=$.extend(!0,defaultParams,params,element.data());element.data('class')&&(elementParams.template='<div class="popover '+element.data('class')+'" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'),element.hasClass('delay0')&&(elementParams.delay={show:0,hide:0}),element.popover(elementParams),('manual'===elementParams.trigger||'undefined'==typeof elementParams.trigger)&&app.registerPopoverManualTrigger(element,elementParams.manualTriggerDelay),elementParams.callbackShown&&element.on('shown.bs.popover',function(e){elementParams.callbackShown(e);}),element.addClass('popover-triggered');}),selectElement},/**
	 * Get binded popover
	 * @param {jQuery} element
	 * @returns {Mixed|jQuery|HTMLElement}
	 */getBindedPopover:function getBindedPopover(element){return $('#'+element.attr('aria-describedby'))},/**
	 * Register tabdrop manual trigger.
	 */registerTabdrop:function registerTabdrop(){var tabs=$('.js-tabdrop');if(tabs.length){var tab=tabs.find('> li');tab.each(function(){$(this).removeClass('d-none');}),tabs.tabdrop({text:app.translate('JS_MORE')});var dropdown=tabs.find('> li.dropdown');dropdown.appendTo(tabs),tab.on('click',function(){setTimeout(function(){$(window).trigger('resize');},500);}),$(window).trigger('resize');}},registerModal:function registerModal(container){'undefined'==typeof container&&(container=$('body')),container.off('click','.js-show-modal').on('click','.js-show-modal',function(e){e.preventDefault();var currentElement=$(e.currentTarget),url=currentElement.data('url');if('undefined'!=typeof url){currentElement.hasClass('js-popover-tooltip')&&currentElement.popover('hide'),currentElement.hasClass('disabledOnClick')&&currentElement.attr('disabled',!0);var modalWindowParams={url:url,currentTarget:currentElement,cb:function cb(modalContainer){var call=currentElement.data('cb');if('undefined'!=typeof call)if(-1!==call.indexOf('.')){var callerArray=call.split('.');('object'===_typeof(window[callerArray[0]])||'function'==typeof window[callerArray[0]])&&window[callerArray[0]][callerArray[1]](modalContainer);}else 'function'==typeof window[call]&&window[call](modalContainer);currentElement.removeAttr('disabled');}};currentElement.data('modalId')&&(modalWindowParams.id=currentElement.data('modalId')),app.showModalWindow(modalWindowParams);}e.stopPropagation();}),container.off('click','.js-show-modal-content').on('click','.js-show-modal-content',function(e){e.preventDefault();var currentElement=$(e.currentTarget),content=currentElement.data('content'),title='',modalClass='';currentElement.data('title')&&(title=currentElement.data('title')),currentElement.data('class')&&(modalClass=currentElement.data('class')),app.showModalWindow('<div class="modal" tabindex="-1" role="dialog"><div class="modal-dialog '+modalClass+'" role="document"><div class="modal-content">\n\t\t\t\t<div class="modal-header"> <h5 class="modal-title">'+title+'</h5>\n\t\t\t\t  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n\t\t\t\t</div><div class="modal-body text-break">'+content+'</div></div></div></div>'),e.stopPropagation();});},/**
	 * Show modal
	 * @param {string} data
	 * @param {object} paramsObject
	 * @param {function} cb
	 * @param {string} url
	 * @param {function} sendByAjaxCb
	 */showModalData:function showModalData(data,paramsObject,cb,url,sendByAjaxCb){var _this3=this;$(data).each(function(i,e){var id=$(e).data('modalId');id&&(window.lastModalId=id);});var modalId=window.lastModalId,container=$('#'+modalId);// prevent duplicate hash generation
container.length&&container.remove(),container=$('<div></div>'),container.attr('id',modalId).addClass('modalContainer js-modal-container'),container.one('hidden.bs.modal',function(){container.remove();var backdrop=$('.modal-backdrop'),modalContainers=$('.modalContainer');0==modalContainers.length&&backdrop.length&&backdrop.remove(),0<backdrop.length&&$('body').addClass('modal-open');}),this.modalParams[modalId]=paramsObject;var params={show:!0};1!==$('#backgroundClosingModal').val()&&(params.backdrop=!0),'object'===('undefined'==typeof paramsObject?'undefined':_typeof(paramsObject))&&(paramsObject.css&&container.css(paramsObject.css),params=$.extend(params,paramsObject)),container.html(data),container.find('.modal').hasClass('static')&&(params.backdrop='static'),$.fn.modal.Constructor.prototype.enforceFocus=function(){$(document).off('focusin.bs.modal')// guard against infinite focus loop
.on('focusin.bs.modal',$.proxy(function(e){if($(e.target).hasClass('select2-search__field'))return !0},this));};var modalContainer=container.find('.modal:first');modalContainer.one('shown.bs.modal',function(){var backdrop=jQuery('.modal-backdrop');1<backdrop.length&&jQuery('.modal-backdrop:not(:first)').remove(),modalContainer.find('.modal-dialog').draggable({handle:'.modal-title'}),modalContainer.find('.modal-title').css('cursor','move');var instance;_this3.modalInstances[modalId]&&(instance=_this3.modalInstances[modalId]),app.registerFieldsEvents(container),_this3.registerDataTables(modalContainer.find('.js-data-table')),cb(modalContainer,instance,paramsObject);}),$('body').append(container),modalContainer.modal(params),this.registerModalEvents(modalContainer,sendByAjaxCb);},/**
	 * Register modal events.
	 * @param {object} container
	 * @param {function} sendByAjaxCb
	 */registerModalEvents:function registerModalEvents(container,sendByAjaxCb){var form=container.find('form'),validationForm=!1;form.hasClass('validateForm')&&(form.validationEngine(app.validationEngineOptions),validationForm=!0),form.hasClass('sendByAjax')&&form.on('submit',function(e){var save=!0;if(e.preventDefault(),validationForm&&0<form.data('jqv').InvalidFields.length&&(app.formAlignmentAfterValidation(form),save=!1),save){var progressIndicatorElement=$.progressIndicator({blockInfo:{enabled:!0}}),formData=form.serializeFormData();AppConnector.request(formData).done(function(responseData){return sendByAjaxCb(formData,responseData),responseData.success&&responseData.result&&(responseData.result.notify&&app.showNotify({text:responseData.result.notify,type:'success'}),responseData.result.procesStop)?(progressIndicatorElement.progressIndicator({mode:'hide'}),!1):void(app.hideModalWindow(),progressIndicatorElement.progressIndicator({mode:'hide'}))}).fail(function(){progressIndicatorElement.progressIndicator({mode:'hide'});});}});},/**
	 * Show modal window.
	 * @param {object} data
	 * @param {string} url
	 * @param {function} cb
	 * @param {object} paramsObject
	 *
	 * @return {object}
	 */showModalWindow:function showModalWindow(data,url,cb){var paramsObject=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(window.parent!==window)return this.childFrame=!0,void window.parent.app.showModalWindow(data,url,cb,paramsObject);//null is also an object
if(window.lastModalId='modal_'+Math.random().toString(36).substr(2,9),'object'===('undefined'==typeof data?'undefined':_typeof(data))&&null!=data&&!(data instanceof $)){if(null!=data.id&&(window.lastModalId=data.id),cb=data.cb,url=data.url,'undefined'!==data.sendByAjaxCb){var sendByAjaxCb=data.sendByAjaxCb;delete data.sendByAjaxCb;}paramsObject=data,data=data.data;}if('function'==typeof url?('object'===('undefined'==typeof cb?'undefined':_typeof(cb))&&(paramsObject=cb),cb=url,url=!1):'object'===('undefined'==typeof url?'undefined':_typeof(url))&&(cb=function(){},paramsObject=url,url=!1),'function'!=typeof cb&&(cb=function(){}),'function'!=typeof sendByAjaxCb)var sendByAjaxCb=function(){};void 0!==paramsObject&&void 0!==paramsObject.modalId&&(window.lastModalId=paramsObject.modalId),data?app.showModalData(data,paramsObject,cb,url,sendByAjaxCb):$.get(url).done(function(response){app.showModalData(response,paramsObject,cb,url,sendByAjaxCb);});},registerModalController:function registerModalController(modalId,modalContainer,cb){var windowParent=this.childFrame?window.parent:window;modalId||(modalId=window.lastModalId),modalContainer||(modalContainer=$('#'+modalId+' .js-modal-data'));var moduleName=modalContainer.data('module')||'Base',modalClass=moduleName.replace(':','_')+'_'+modalContainer.data('view')+'_JS';if('undefined'==typeof windowParent[modalClass]&&(modalClass='Base_'+modalContainer.data('view')+'_JS'),'undefined'!=typeof windowParent[modalClass]){var params,instance=new windowParent[modalClass];'function'==typeof cb&&cb(modalContainer,instance),this.modalParams[modalId]&&(params=this.modalParams[modalId]),instance.registerEvents(modalContainer,params),this.modalInstances[modalId]=instance;}},/**
	 * Function which you can use to hide the modal
	 *
	 *  @param {function} callback
	 *  @param {integer} id
	 */hideModalWindow:function hideModalWindow(callback,id){var container;if(container=callback&&'object'===('undefined'==typeof callback?'undefined':_typeof(callback))?callback:null==id?$('.modalContainer'):$('#'+id),!(0>=container.length)){'function'!=typeof callback&&(callback=function(){});var modalContainer=container.find('.modal');modalContainer.modal('hide');var backdrop=$('.modal-backdrop:last');0==$('.modalContainer').length&&backdrop.length&&backdrop.remove(),modalContainer.one('hidden.bs.modal',callback);}},registerAdditions:function registerAdditions($){$.fn.serializeFormData=function(){var form=$(this),values=form.serializeArray(),data={};values&&$(values).each(function(k,v){var element=form.find('[name="'+v.name+'"]');element.is('select')&&null!=element.attr('multiple')?(null==data[v.name]&&(data[v.name]=[]),data[v.name].push(v.value)):data[v.name]=v.value;});// If data-type="autocomplete", pickup data-value="..." set
var autocompletes=$('[data-type="autocomplete"]',$(this));return $(autocompletes).each(function(i){var ac=$(autocompletes[i]);data[ac.attr('name')]=ac.data('value');}),data};},/**
	 * Function to push down the error message size when validation is invoked
	 * @params : form Element
	 */formAlignmentAfterValidation:function formAlignmentAfterValidation(form){// to avoid hiding of error message under the fixed nav bar
var formError=form.find('.formError:not(\'.greenPopup\'):first');if(0<formError.length){var destination=formError.offset().top;jQuery('html').animate({scrollTop:destination-105},'slow');}},getRecordList:function getRecordList(params,callback){app.showModalWindow(null,params,function(container,modalInstance){modalInstance.addSelectCallBack(function(e){callback(e),app.hideModalWindow();});});},/**
	 * Open url in top window
	 * @param string url
	 */openUrl:function openUrl(url){window.location===window.top.location?window.location.href=url:window.top.location.href=url;},openUrlMethodPost:function openUrlMethodPost(url,postData){var formHtml='<form action="'+url+'" method="post">';$.each(postData,function(index,value){formHtml+='<input type="text" name="'+index+'" value="'+value+'" />';}),formHtml+='</form>';var form=$(formHtml);$('body').append(form),form.submit();},registerMobileMenu:function registerMobileMenu(container){$('.js-sidebar-btn').on('click',function(){var mobileMenu=container.find('.js-mobile-page'),mobileMenuContent=container.find('.js-mobile-body');mobileMenu.hasClass('c-menu-mobile')?(mobileMenu.removeClass('c-menu-mobile'),mobileMenuContent.removeClass('c-menu-mobile__content')):(mobileMenu.addClass('c-menu-mobile'),mobileMenuContent.addClass('c-menu-mobile__content'));});},errorLog:function errorLog(error,err,errorThrown){console.warn('%cYetiForce debug mode!!!','color: red; font-family: sans-serif; font-size: 1.5em; font-weight: bolder; text-shadow: #000 1px 1px;'),'object'===('undefined'==typeof error?'undefined':_typeof(error))&&error.responseText&&(error=error.responseText),'object'===('undefined'==typeof error?'undefined':_typeof(error))&&error.statusText&&(error=error.statusText),error&&console.error(error),err&&'error'!==err&&console.error(err),errorThrown&&console.error(errorThrown);},registerSubMenu:function registerSubMenu(){$('.js-submenu-toggler').on('click',function(e){$(e.currentTarget).hasClass('collapsed')||$(e.target).closest('.toggler').length||(window.location=$(e.currentTarget).attr('href'));});},showNotifyConfirm:function showNotifyConfirm(customParams,confirmFn,cancelFn){var params={title:'???',icon:'fas fa-question-circle',hide:!1,closer:!1,sticker:!1,destroy:!0,stack:new PNotify.Stack({dir1:'down',modal:!0,firstpos1:25,overlayClose:!1}),modules:new Map([].concat(toConsumableArray(PNotify.defaultModules),[[PNotifyConfirm,{confirm:!0,align:'center'}]]))},notice=PNotify.info($.extend(params,customParams));'function'==typeof confirmFn&&notice.on('pnotify:confirm',confirmFn),'function'==typeof cancelFn&&notice.on('pnotify:cancel',cancelFn);},/**
	 * Show left scrollbar.
	 *
	 * @param   {object}  element
	 * @param   {object}  options
	 */showNewScrollbarLeft:function showNewScrollbarLeft(element){var options=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{wheelPropagation:!0};if('undefined'!=typeof element&&element.length){options=Object.assign(this.scrollOptions,options),new PerfectScrollbar(element[0],options);var scrollbarLeftElement=element.children('.ps__rail-y').first();scrollbarLeftElement.css({left:0,right:'auto'}),scrollbarLeftElement.find('.ps__thumb-y').css({left:2,right:'auto'});}},showNotify:function showNotify(customParams){var params={hide:!1},userParams=customParams,type='info';return 'string'==typeof customParams&&(userParams={title:customParams}),'undefined'!=typeof customParams.type&&(type=customParams.type),'error'!==type&&(params.hide=!0),PNotify[type]($.extend(params,userParams))},/**
	 * Set Pnotify defaults options
	 */setNotifyDefaultOptions:function setNotifyDefaultOptions(){// *Trusted option enables html as parameter's value
PNotify.defaults.textTrusted=!0,PNotify.defaults.titleTrusted=!0,PNotify.defaults.sticker=!1,PNotify.defaults.styling='bootstrap4',PNotify.defaults.icons='fontawesome5',PNotify.defaults.delay=3e3,PNotify.defaults.stack.maxOpen=10,PNotify.defaults.stack.spacing1=5,PNotify.defaults.stack.spacing2=5,PNotify.defaults.labels.close=app.translate('JS_CLOSE'),PNotify.defaultModules.set(PNotifyBootstrap4,{}),PNotify.defaultModules.set(PNotifyFontAwesome5,{}),PNotify.defaultModules.set(PNotifyMobile,{}),PNotifyConfirm.defaults.buttons=[{text:app.translate('JS_YES'),addClass:'btn-success',primary:!0,promptTrigger:!0,click:function click(notice,value){notice.close(),notice.fire('pnotify:confirm',{notice:notice,value:value});}},{text:app.translate('JS_NO'),addClass:'btn-warning',click:function click(notice){notice.close(),notice.fire('pnotify:cancel',{notice:notice});}}],'undefined'==typeof window.stackContextModal&&(window.stackPage=new PNotify.Stack({dir1:'down',firstpos1:25,context:document.getElementById('page'),modal:!0,maxOpen:1/0})),'undefined'==typeof window.stackContextModal&&(window.stackPage=new PNotify.Stack({dir1:'down',firstpos1:25,context:document.getElementById('page'),modal:!0,maxOpen:1/0}));},registerIframeAndMoreContent:function registerIframeAndMoreContent(){var showMoreModal=function(e){e.preventDefault(),e.stopPropagation();var btn=$(e.currentTarget),message=btn.data('iframe')?btn.siblings('iframe').clone().show():btn.closest('.js-more-content').find('.fullContent').html();bootbox.dialog({message:message,title:'<span class="mdi mdi-overscan"></span>  '+app.translate('JS_FULL_TEXT'),className:'u-word-break modal-fullscreen',buttons:{danger:{label:'<span class="fas fa-times mr-1"></span>'+app.translate('JS_CLOSE'),className:'btn-danger',callback:function callback(){}}}});};$('.js-more').on('click',showMoreModal),$(document).on('click','.js-more',showMoreModal);},processEvents:!1,registerAfterLoginEvents:function registerAfterLoginEvents(){if(!1===this.processEvents){var processEvents=$('#processEvents');if(0===processEvents.length)return;this.processEvents=JSON.parse(processEvents.val());}if(0!==this.processEvents.length){var event=this.processEvents.shift();switch(event.type){case'modal':AppConnector.request(event.url).done(function(requestData){app.showModalWindow(requestData).one('hidden.bs.modal',function(){app.registerAfterLoginEvents();});}).fail(function(textStatus,errorThrown){app.showNotify({title:app.translate('JS_ERROR'),text:errorThrown,type:'error'});});break;case'notify':app.showNotify(event.notify),app.registerAfterLoginEvents();break;}}},/**
	 * Convert object to url string
	 *
	 * @param   {object}  urlData
	 * @param   {string}  entryFile
	 *
	 * @return  {string}  url
	 */convertObjectToUrl:function convertObjectToUrl(){var urlData=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},entryFile=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'index.php?',url=entryFile;return Object.keys(urlData).forEach(function(key){var value=urlData[key];'object'===('undefined'==typeof value?'undefined':_typeof(value))||'string'==typeof value&&value.startsWith('<')||(url!==entryFile&&(url+='&'),url+=key+'='+value);}),url},/**
	 * Convert url string to object
	 * @param   {string}  url
	 * @return  {object}  urlObject
	 */convertUrlToObject:function convertUrlToObject(url){var urlObject={};return -1!==url.indexOf('index.php?')&&(url=url.split('index.php?')[1]),url.split('&').forEach(function(el){if(el.includes('=')){var values=el.split('=');urlObject[values[0]]=values[1];}}),urlObject},registerFieldsEvents:function registerFieldsEvents(container){this.registerSelectField(container),this.registerEventForClockPicker(container.find('.clockPicker')),App.Fields.Date.register(container),App.Fields.DateTime.register(container),App.Fields.Date.registerRange(container),App.Fields.Text.Editor.register(container.find('.js-editor'),{height:'5em',toolbar:'Min'});}};CKEDITOR.disableAutoInline=!0,$(function(){var container=$('body');app.registerFieldsEvents(container),app.setNotifyDefaultOptions(),app.registerAdditions(jQuery),app.registerPopover(),app.registerSubMenu(),app.registerModal(container),app.registerMobileMenu(container),app.registerTabdrop(),App.Components.QuickCreate.register(),app.registerIframeAndMoreContent(),app.registerBaseEvent(container),app.registerAfterLoginEvents(container),$('#fingerPrint').length&&'function'==typeof DeviceUUID&&$('#fingerPrint').val(new DeviceUUID().get());// Instantiate Page Controller
var pageController=app.getPageController();pageController&&pageController.registerEvents(),'undefined'==typeof $.fn.datepicker.dates[app.getMainParams('langKey')]&&($.fn.datepicker.dates[app.getMainParams('langKey')]={days:App.Fields.Date.fullDaysTranslated,daysShort:App.Fields.Date.daysTranslated,daysMin:App.Fields.Date.daysTranslated,months:App.Fields.Date.fullMonthsTranslated,monthsShort:App.Fields.Date.monthsTranslated,today:app.translate('JS_TODAY'),clear:app.translate('JS_CLEAR'),format:app.getMainParams('userDateFormat'),titleFormat:'MM yyyy'/* Leverages same syntax as 'format' */,weekStart:app.getMainParams('firstDayOfWeekNo'),applyLabel:app.translate('JS_APPLY'),cancelLabel:app.translate('JS_CANCEL'),fromLabel:app.translate('JS_FROM'),toLabel:app.translate('JS_TO'),customRangeLabel:app.translate('JS_CUSTOM'),weekLabel:app.translate('JS_WEEK').substr(0,1)});});
//# sourceMappingURL=app.min.js.map
